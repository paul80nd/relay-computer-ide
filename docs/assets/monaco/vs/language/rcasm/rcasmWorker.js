/*!-----------------------------------------------------------------------------
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * monaco-rcasm version: 2.7.0(18923aa8c1cfb28c9c536d1c54e8da091940f029)
 * Released under the MIT license
 * https://github.com/paul80nd/monaco-rcasm/blob/master/LICENSE.md
 *-----------------------------------------------------------------------------*/
!function(e){if("object"==typeof module&&"object"==typeof module.exports){var t=e(require,exports);void 0!==t&&(module.exports=t)}else"function"==typeof define&&define.amd&&define("vscode-languageserver-types/main",["require","exports"],e)}((function(e,t){"use strict";var n,r,i,o,s,a,c,u,p,d,f,l,h;Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.create=function(e,t){return{line:e,character:t}},e.is=function(e){var t=e;return T.objectLiteral(t)&&T.number(t.line)&&T.number(t.character)}}(n=t.Position||(t.Position={})),function(e){e.create=function(e,t,r,i){if(T.number(e)&&T.number(t)&&T.number(r)&&T.number(i))return{start:n.create(e,t),end:n.create(r,i)};if(n.is(e)&&n.is(t))return{start:e,end:t};throw new Error("Range#create called with invalid arguments["+e+", "+t+", "+r+", "+i+"]")},e.is=function(e){var t=e;return T.objectLiteral(t)&&n.is(t.start)&&n.is(t.end)}}(r=t.Range||(t.Range={})),function(e){e.create=function(e,t){return{uri:e,range:t}},e.is=function(e){var t=e;return T.defined(t)&&r.is(t.range)&&(T.string(t.uri)||T.undefined(t.uri))}}(i=t.Location||(t.Location={})),function(e){e.create=function(e,t,n,r){return{targetUri:e,targetRange:t,targetSelectionRange:n,originSelectionRange:r}},e.is=function(e){var t=e;return T.defined(t)&&r.is(t.targetRange)&&T.string(t.targetUri)&&(r.is(t.targetSelectionRange)||T.undefined(t.targetSelectionRange))&&(r.is(t.originSelectionRange)||T.undefined(t.originSelectionRange))}}(t.LocationLink||(t.LocationLink={})),function(e){e.create=function(e,t,n,r){return{red:e,green:t,blue:n,alpha:r}},e.is=function(e){var t=e;return T.number(t.red)&&T.number(t.green)&&T.number(t.blue)&&T.number(t.alpha)}}(o=t.Color||(t.Color={})),function(e){e.create=function(e,t){return{range:e,color:t}},e.is=function(e){var t=e;return r.is(t.range)&&o.is(t.color)}}(t.ColorInformation||(t.ColorInformation={})),function(e){e.create=function(e,t,n){return{label:e,textEdit:t,additionalTextEdits:n}},e.is=function(e){var t=e;return T.string(t.label)&&(T.undefined(t.textEdit)||u.is(t))&&(T.undefined(t.additionalTextEdits)||T.typedArray(t.additionalTextEdits,u.is))}}(t.ColorPresentation||(t.ColorPresentation={})),function(e){e.Comment="comment",e.Imports="imports",e.Region="region"}(t.FoldingRangeKind||(t.FoldingRangeKind={})),function(e){e.create=function(e,t,n,r,i){var o={startLine:e,endLine:t};return T.defined(n)&&(o.startCharacter=n),T.defined(r)&&(o.endCharacter=r),T.defined(i)&&(o.kind=i),o},e.is=function(e){var t=e;return T.number(t.startLine)&&T.number(t.startLine)&&(T.undefined(t.startCharacter)||T.number(t.startCharacter))&&(T.undefined(t.endCharacter)||T.number(t.endCharacter))&&(T.undefined(t.kind)||T.string(t.kind))}}(t.FoldingRange||(t.FoldingRange={})),function(e){e.create=function(e,t){return{location:e,message:t}},e.is=function(e){var t=e;return T.defined(t)&&i.is(t.location)&&T.string(t.message)}}(s=t.DiagnosticRelatedInformation||(t.DiagnosticRelatedInformation={})),function(e){e.Error=1,e.Warning=2,e.Information=3,e.Hint=4}(t.DiagnosticSeverity||(t.DiagnosticSeverity={})),function(e){e.Unnecessary=1,e.Deprecated=2}(t.DiagnosticTag||(t.DiagnosticTag={})),function(e){e.create=function(e,t,n,r,i,o){var s={range:e,message:t};return T.defined(n)&&(s.severity=n),T.defined(r)&&(s.code=r),T.defined(i)&&(s.source=i),T.defined(o)&&(s.relatedInformation=o),s},e.is=function(e){var t=e;return T.defined(t)&&r.is(t.range)&&T.string(t.message)&&(T.number(t.severity)||T.undefined(t.severity))&&(T.number(t.code)||T.string(t.code)||T.undefined(t.code))&&(T.string(t.source)||T.undefined(t.source))&&(T.undefined(t.relatedInformation)||T.typedArray(t.relatedInformation,s.is))}}(a=t.Diagnostic||(t.Diagnostic={})),function(e){e.create=function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var i={title:e,command:t};return T.defined(n)&&n.length>0&&(i.arguments=n),i},e.is=function(e){var t=e;return T.defined(t)&&T.string(t.title)&&T.string(t.command)}}(c=t.Command||(t.Command={})),function(e){e.replace=function(e,t){return{range:e,newText:t}},e.insert=function(e,t){return{range:{start:e,end:e},newText:t}},e.del=function(e){return{range:e,newText:""}},e.is=function(e){var t=e;return T.objectLiteral(t)&&T.string(t.newText)&&r.is(t.range)}}(u=t.TextEdit||(t.TextEdit={})),function(e){e.create=function(e,t){return{textDocument:e,edits:t}},e.is=function(e){var t=e;return T.defined(t)&&m.is(t.textDocument)&&Array.isArray(t.edits)}}(p=t.TextDocumentEdit||(t.TextDocumentEdit={})),function(e){e.create=function(e,t){var n={kind:"create",uri:e};return void 0===t||void 0===t.overwrite&&void 0===t.ignoreIfExists||(n.options=t),n},e.is=function(e){var t=e;return t&&"create"===t.kind&&T.string(t.uri)&&(void 0===t.options||(void 0===t.options.overwrite||T.boolean(t.options.overwrite))&&(void 0===t.options.ignoreIfExists||T.boolean(t.options.ignoreIfExists)))}}(d=t.CreateFile||(t.CreateFile={})),function(e){e.create=function(e,t,n){var r={kind:"rename",oldUri:e,newUri:t};return void 0===n||void 0===n.overwrite&&void 0===n.ignoreIfExists||(r.options=n),r},e.is=function(e){var t=e;return t&&"rename"===t.kind&&T.string(t.oldUri)&&T.string(t.newUri)&&(void 0===t.options||(void 0===t.options.overwrite||T.boolean(t.options.overwrite))&&(void 0===t.options.ignoreIfExists||T.boolean(t.options.ignoreIfExists)))}}(f=t.RenameFile||(t.RenameFile={})),function(e){e.create=function(e,t){var n={kind:"delete",uri:e};return void 0===t||void 0===t.recursive&&void 0===t.ignoreIfNotExists||(n.options=t),n},e.is=function(e){var t=e;return t&&"delete"===t.kind&&T.string(t.uri)&&(void 0===t.options||(void 0===t.options.recursive||T.boolean(t.options.recursive))&&(void 0===t.options.ignoreIfNotExists||T.boolean(t.options.ignoreIfNotExists)))}}(l=t.DeleteFile||(t.DeleteFile={})),function(e){e.is=function(e){var t=e;return t&&(void 0!==t.changes||void 0!==t.documentChanges)&&(void 0===t.documentChanges||t.documentChanges.every((function(e){return T.string(e.kind)?d.is(e)||f.is(e)||l.is(e):p.is(e)})))}}(h=t.WorkspaceEdit||(t.WorkspaceEdit={}));var m,g,y,v,b=function(){function e(e){this.edits=e}return e.prototype.insert=function(e,t){this.edits.push(u.insert(e,t))},e.prototype.replace=function(e,t){this.edits.push(u.replace(e,t))},e.prototype.delete=function(e){this.edits.push(u.del(e))},e.prototype.add=function(e){this.edits.push(e)},e.prototype.all=function(){return this.edits},e.prototype.clear=function(){this.edits.splice(0,this.edits.length)},e}(),x=function(){function e(e){var t=this;this._textEditChanges=Object.create(null),e&&(this._workspaceEdit=e,e.documentChanges?e.documentChanges.forEach((function(e){if(p.is(e)){var n=new b(e.edits);t._textEditChanges[e.textDocument.uri]=n}})):e.changes&&Object.keys(e.changes).forEach((function(n){var r=new b(e.changes[n]);t._textEditChanges[n]=r})))}return Object.defineProperty(e.prototype,"edit",{get:function(){return this._workspaceEdit},enumerable:!0,configurable:!0}),e.prototype.getTextEditChange=function(e){if(m.is(e)){if(this._workspaceEdit||(this._workspaceEdit={documentChanges:[]}),!this._workspaceEdit.documentChanges)throw new Error("Workspace edit is not configured for document changes.");var t=e;if(!(r=this._textEditChanges[t.uri])){var n={textDocument:t,edits:i=[]};this._workspaceEdit.documentChanges.push(n),r=new b(i),this._textEditChanges[t.uri]=r}return r}if(this._workspaceEdit||(this._workspaceEdit={changes:Object.create(null)}),!this._workspaceEdit.changes)throw new Error("Workspace edit is not configured for normal text edit changes.");var r;if(!(r=this._textEditChanges[e])){var i=[];this._workspaceEdit.changes[e]=i,r=new b(i),this._textEditChanges[e]=r}return r},e.prototype.createFile=function(e,t){this.checkDocumentChanges(),this._workspaceEdit.documentChanges.push(d.create(e,t))},e.prototype.renameFile=function(e,t,n){this.checkDocumentChanges(),this._workspaceEdit.documentChanges.push(f.create(e,t,n))},e.prototype.deleteFile=function(e,t){this.checkDocumentChanges(),this._workspaceEdit.documentChanges.push(l.create(e,t))},e.prototype.checkDocumentChanges=function(){if(!this._workspaceEdit||!this._workspaceEdit.documentChanges)throw new Error("Workspace edit is not configured for document changes.")},e}();t.WorkspaceChange=x,function(e){e.create=function(e){return{uri:e}},e.is=function(e){var t=e;return T.defined(t)&&T.string(t.uri)}}(t.TextDocumentIdentifier||(t.TextDocumentIdentifier={})),function(e){e.create=function(e,t){return{uri:e,version:t}},e.is=function(e){var t=e;return T.defined(t)&&T.string(t.uri)&&(null===t.version||T.number(t.version))}}(m=t.VersionedTextDocumentIdentifier||(t.VersionedTextDocumentIdentifier={})),function(e){e.create=function(e,t,n,r){return{uri:e,languageId:t,version:n,text:r}},e.is=function(e){var t=e;return T.defined(t)&&T.string(t.uri)&&T.string(t.languageId)&&T.number(t.version)&&T.string(t.text)}}(t.TextDocumentItem||(t.TextDocumentItem={})),function(e){e.PlainText="plaintext",e.Markdown="markdown"}(g=t.MarkupKind||(t.MarkupKind={})),function(e){e.is=function(t){var n=t;return n===e.PlainText||n===e.Markdown}}(g=t.MarkupKind||(t.MarkupKind={})),function(e){e.is=function(e){var t=e;return T.objectLiteral(e)&&g.is(t.kind)&&T.string(t.value)}}(y=t.MarkupContent||(t.MarkupContent={})),function(e){e.Text=1,e.Method=2,e.Function=3,e.Constructor=4,e.Field=5,e.Variable=6,e.Class=7,e.Interface=8,e.Module=9,e.Property=10,e.Unit=11,e.Value=12,e.Enum=13,e.Keyword=14,e.Snippet=15,e.Color=16,e.File=17,e.Reference=18,e.Folder=19,e.EnumMember=20,e.Constant=21,e.Struct=22,e.Event=23,e.Operator=24,e.TypeParameter=25}(t.CompletionItemKind||(t.CompletionItemKind={})),function(e){e.PlainText=1,e.Snippet=2}(t.InsertTextFormat||(t.InsertTextFormat={})),function(e){e.Deprecated=1}(t.CompletionItemTag||(t.CompletionItemTag={})),function(e){e.create=function(e){return{label:e}}}(t.CompletionItem||(t.CompletionItem={})),function(e){e.create=function(e,t){return{items:e||[],isIncomplete:!!t}}}(t.CompletionList||(t.CompletionList={})),function(e){e.fromPlainText=function(e){return e.replace(/[\\`*_{}[\]()#+\-.!]/g,"\\$&")},e.is=function(e){var t=e;return T.string(t)||T.objectLiteral(t)&&T.string(t.language)&&T.string(t.value)}}(v=t.MarkedString||(t.MarkedString={})),function(e){e.is=function(e){var t=e;return!!t&&T.objectLiteral(t)&&(y.is(t.contents)||v.is(t.contents)||T.typedArray(t.contents,v.is))&&(void 0===e.range||r.is(e.range))}}(t.Hover||(t.Hover={})),function(e){e.create=function(e,t){return t?{label:e,documentation:t}:{label:e}}}(t.ParameterInformation||(t.ParameterInformation={})),function(e){e.create=function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var i={label:e};return T.defined(t)&&(i.documentation=t),T.defined(n)?i.parameters=n:i.parameters=[],i}}(t.SignatureInformation||(t.SignatureInformation={})),function(e){e.Text=1,e.Read=2,e.Write=3}(t.DocumentHighlightKind||(t.DocumentHighlightKind={})),function(e){e.create=function(e,t){var n={range:e};return T.number(t)&&(n.kind=t),n}}(t.DocumentHighlight||(t.DocumentHighlight={})),function(e){e.File=1,e.Module=2,e.Namespace=3,e.Package=4,e.Class=5,e.Method=6,e.Property=7,e.Field=8,e.Constructor=9,e.Enum=10,e.Interface=11,e.Function=12,e.Variable=13,e.Constant=14,e.String=15,e.Number=16,e.Boolean=17,e.Array=18,e.Object=19,e.Key=20,e.Null=21,e.EnumMember=22,e.Struct=23,e.Event=24,e.Operator=25,e.TypeParameter=26}(t.SymbolKind||(t.SymbolKind={})),function(e){e.Deprecated=1}(t.SymbolTag||(t.SymbolTag={})),function(e){e.create=function(e,t,n,r,i){var o={name:e,kind:t,location:{uri:r,range:n}};return i&&(o.containerName=i),o}}(t.SymbolInformation||(t.SymbolInformation={})),function(e){e.create=function(e,t,n,r,i,o){var s={name:e,detail:t,kind:n,range:r,selectionRange:i};return void 0!==o&&(s.children=o),s},e.is=function(e){var t=e;return t&&T.string(t.name)&&T.number(t.kind)&&r.is(t.range)&&r.is(t.selectionRange)&&(void 0===t.detail||T.string(t.detail))&&(void 0===t.deprecated||T.boolean(t.deprecated))&&(void 0===t.children||Array.isArray(t.children))}}(t.DocumentSymbol||(t.DocumentSymbol={})),function(e){e.Empty="",e.QuickFix="quickfix",e.Refactor="refactor",e.RefactorExtract="refactor.extract",e.RefactorInline="refactor.inline",e.RefactorRewrite="refactor.rewrite",e.Source="source",e.SourceOrganizeImports="source.organizeImports",e.SourceFixAll="source.fixAll"}(t.CodeActionKind||(t.CodeActionKind={})),function(e){e.create=function(e,t){var n={diagnostics:e};return null!=t&&(n.only=t),n},e.is=function(e){var t=e;return T.defined(t)&&T.typedArray(t.diagnostics,a.is)&&(void 0===t.only||T.typedArray(t.only,T.string))}}(t.CodeActionContext||(t.CodeActionContext={})),function(e){e.create=function(e,t,n){var r={title:e};return c.is(t)?r.command=t:r.edit=t,void 0!==n&&(r.kind=n),r},e.is=function(e){var t=e;return t&&T.string(t.title)&&(void 0===t.diagnostics||T.typedArray(t.diagnostics,a.is))&&(void 0===t.kind||T.string(t.kind))&&(void 0!==t.edit||void 0!==t.command)&&(void 0===t.command||c.is(t.command))&&(void 0===t.isPreferred||T.boolean(t.isPreferred))&&(void 0===t.edit||h.is(t.edit))}}(t.CodeAction||(t.CodeAction={})),function(e){e.create=function(e,t){var n={range:e};return T.defined(t)&&(n.data=t),n},e.is=function(e){var t=e;return T.defined(t)&&r.is(t.range)&&(T.undefined(t.command)||c.is(t.command))}}(t.CodeLens||(t.CodeLens={})),function(e){e.create=function(e,t){return{tabSize:e,insertSpaces:t}},e.is=function(e){var t=e;return T.defined(t)&&T.number(t.tabSize)&&T.boolean(t.insertSpaces)}}(t.FormattingOptions||(t.FormattingOptions={})),function(e){e.create=function(e,t,n){return{range:e,target:t,data:n}},e.is=function(e){var t=e;return T.defined(t)&&r.is(t.range)&&(T.undefined(t.target)||T.string(t.target))}}(t.DocumentLink||(t.DocumentLink={})),function(e){e.create=function(e,t){return{range:e,parent:t}},e.is=function(t){var n=t;return void 0!==n&&r.is(n.range)&&(void 0===n.parent||e.is(n.parent))}}(t.SelectionRange||(t.SelectionRange={})),t.EOL=["\n","\r\n","\r"],function(e){e.create=function(e,t,n,r){return new C(e,t,n,r)},e.is=function(e){var t=e;return!!(T.defined(t)&&T.string(t.uri)&&(T.undefined(t.languageId)||T.string(t.languageId))&&T.number(t.lineCount)&&T.func(t.getText)&&T.func(t.positionAt)&&T.func(t.offsetAt))},e.applyEdits=function(e,t){for(var n=e.getText(),r=function e(t,n){if(t.length<=1)return t;var r=t.length/2|0,i=t.slice(0,r),o=t.slice(r);e(i,n),e(o,n);var s=0,a=0,c=0;for(;s<i.length&&a<o.length;){var u=n(i[s],o[a]);t[c++]=u<=0?i[s++]:o[a++]}for(;s<i.length;)t[c++]=i[s++];for(;a<o.length;)t[c++]=o[a++];return t}(t,(function(e,t){var n=e.range.start.line-t.range.start.line;return 0===n?e.range.start.character-t.range.start.character:n})),i=n.length,o=r.length-1;o>=0;o--){var s=r[o],a=e.offsetAt(s.range.start),c=e.offsetAt(s.range.end);if(!(c<=i))throw new Error("Overlapping edit");n=n.substring(0,a)+s.newText+n.substring(c,n.length),i=a}return n}}(t.TextDocument||(t.TextDocument={}));var T,C=function(){function e(e,t,n,r){this._uri=e,this._languageId=t,this._version=n,this._content=r,this._lineOffsets=void 0}return Object.defineProperty(e.prototype,"uri",{get:function(){return this._uri},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"languageId",{get:function(){return this._languageId},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"version",{get:function(){return this._version},enumerable:!0,configurable:!0}),e.prototype.getText=function(e){if(e){var t=this.offsetAt(e.start),n=this.offsetAt(e.end);return this._content.substring(t,n)}return this._content},e.prototype.update=function(e,t){this._content=e.text,this._version=t,this._lineOffsets=void 0},e.prototype.getLineOffsets=function(){if(void 0===this._lineOffsets){for(var e=[],t=this._content,n=!0,r=0;r<t.length;r++){n&&(e.push(r),n=!1);var i=t.charAt(r);n="\r"===i||"\n"===i,"\r"===i&&r+1<t.length&&"\n"===t.charAt(r+1)&&r++}n&&t.length>0&&e.push(t.length),this._lineOffsets=e}return this._lineOffsets},e.prototype.positionAt=function(e){e=Math.max(Math.min(e,this._content.length),0);var t=this.getLineOffsets(),r=0,i=t.length;if(0===i)return n.create(0,e);for(;r<i;){var o=Math.floor((r+i)/2);t[o]>e?i=o:r=o+1}var s=r-1;return n.create(s,e-t[s])},e.prototype.offsetAt=function(e){var t=this.getLineOffsets();if(e.line>=t.length)return this._content.length;if(e.line<0)return 0;var n=t[e.line],r=e.line+1<t.length?t[e.line+1]:this._content.length;return Math.max(Math.min(n+e.character,r),n)},Object.defineProperty(e.prototype,"lineCount",{get:function(){return this.getLineOffsets().length},enumerable:!0,configurable:!0}),e}();!function(e){var t=Object.prototype.toString;e.defined=function(e){return void 0!==e},e.undefined=function(e){return void 0===e},e.boolean=function(e){return!0===e||!1===e},e.string=function(e){return"[object String]"===t.call(e)},e.number=function(e){return"[object Number]"===t.call(e)},e.func=function(e){return"[object Function]"===t.call(e)},e.objectLiteral=function(e){return null!==e&&"object"==typeof e},e.typedArray=function(e,t){return Array.isArray(e)&&e.every(t)}}(T||(T={}))})),define("vscode-languageserver-types",["vscode-languageserver-types/main"],(function(e){return e})),function(e){if("object"==typeof module&&"object"==typeof module.exports){var t=e(require,exports);void 0!==t&&(module.exports=t)}else"function"==typeof define&&define.amd&&define("@paul80nd/vscode-rcasm-languageservice/rcasmLanguageTypes",["require","exports","vscode-languageserver-types","vscode-languageserver-types"],e)}((function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=e("vscode-languageserver-types");!function(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}(e("vscode-languageserver-types")),function(e){e[e.Binary=0]="Binary",e[e.Comma=1]="Comma",e[e.Comment=2]="Comment",e[e.Hexadecimal=3]="Hexadecimal",e[e.Identifier=4]="Identifier",e[e.Integer=5]="Integer",e[e.Label=6]="Label",e[e.Minus=7]="Minus",e[e.Plus=8]="Plus",e[e.EOL=9]="EOL",e[e.EOF=10]="EOF",e[e.InvalidChar=11]="InvalidChar"}(t.TokenType||(t.TokenType={})),function(e){e.LATEST={textDocument:{hover:{contentFormat:[n.MarkupKind.Markdown,n.MarkupKind.PlainText]}}}}(t.ClientCapabilities||(t.ClientCapabilities={}))})),function(e){if("object"==typeof module&&"object"==typeof module.exports){var t=e(require,exports);void 0!==t&&(module.exports=t)}else"function"==typeof define&&define.amd&&define("@paul80nd/vscode-rcasm-languageservice/parser/rcasmScanner",["require","exports","../rcasmLanguageTypes"],e)}((function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=e("../rcasmLanguageTypes"),r=function(){function e(e){this.source=e,this.len=e.length,this.position=0}return e.prototype.substring=function(e,t){return void 0===t&&(t=this.position),this.source.substring(e,t)},e.prototype.eos=function(){return this.len<=this.position},e.prototype.pos=function(){return this.position},e.prototype.advance=function(e){this.position+=e},e.prototype.nextChar=function(){return this.source.charCodeAt(this.position++)||0},e.prototype.peekChar=function(e){return void 0===e&&(e=0),this.source.charCodeAt(this.position+e)||0},e.prototype.advanceIfChar=function(e){return e===this.source.charCodeAt(this.position)&&(this.position++,!0)},e.prototype.advanceWhileChar=function(e){for(var t=this.position;this.position<this.len&&e(this.source.charCodeAt(this.position));)this.position++;return this.position-t},e}();t.MultiLineStream=r;var i="0".charCodeAt(0),o="1".charCodeAt(0),s="9".charCodeAt(0),a="a".charCodeAt(0),c="A".charCodeAt(0),u="b".charCodeAt(0),p="B".charCodeAt(0),d="f".charCodeAt(0),f="F".charCodeAt(0),l="x".charCodeAt(0),h="X".charCodeAt(0),m="z".charCodeAt(0),g="Z".charCodeAt(0),y="\n".charCodeAt(0),v="\r".charCodeAt(0),b="\f".charCodeAt(0),x=" ".charCodeAt(0),T="\t".charCodeAt(0),C="-".charCodeAt(0),_="+".charCodeAt(0),O=",".charCodeAt(0),k=":".charCodeAt(0),P=".".charCodeAt(0),E=";".charCodeAt(0),R={};R[O]=n.TokenType.Comma,R[C]=n.TokenType.Minus,R[_]=n.TokenType.Plus;var L=function(){function e(){this.stream=new r(""),this.ignoreComment=!0,this.ignoreWhitespace=!0}return e.prototype.setSource=function(e){this.stream=new r(e)},e.prototype.finishToken=function(e,t,n){return{offset:e,len:this.stream.pos()-e,type:t,text:n||this.stream.substring(e)}},e.prototype.scan=function(){this._whitespace();var e=this.stream.pos();return this.stream.eos()?this.finishToken(e,n.TokenType.EOF):this.scanNext(e)},e.prototype.scanNext=function(e){if(this._newline())return this.finishToken(e,n.TokenType.EOL);if(this._comment())return this.finishToken(e,n.TokenType.Comment);var t=R[this.stream.peekChar()];if(void 0!==t)return this.stream.advance(1),this.finishToken(e,t);if(this._identifier()){if(this.stream.peekChar()===k){var r=this.finishToken(e,n.TokenType.Label);return this.stream.advance(1),r}return this.finishToken(e,n.TokenType.Identifier)}return this._binary()?this.finishToken(e,n.TokenType.Binary):this._hexadecimal()?this.finishToken(e,n.TokenType.Hexadecimal):this._number()?this.finishToken(e,n.TokenType.Integer):(this.stream.nextChar(),this.finishToken(e,n.TokenType.InvalidChar))},e.prototype._comment=function(){return!!this.stream.advanceIfChar(E)&&(this.stream.advanceWhileChar((function(e){return e!==v&&e!==b&&e!==y})),!0)},e.prototype._identifier=function(){if(this._identFirstChar()){for(;this._identChar(););return!0}return!1},e.prototype._identFirstChar=function(){var e=this.stream.peekChar();return(e>=a&&e<=m||e>=c&&e<=g)&&(this.stream.advance(1),!0)},e.prototype._identChar=function(){var e=this.stream.peekChar();return(e===P||e>=a&&e<=m||e>=c&&e<=g||e>=i&&e<=s)&&(this.stream.advance(1),!0)},e.prototype._binary=function(){var e=this.stream.peekChar(0),t=this.stream.peekChar(1);return e===i&&(t===p||t===u)&&(this.stream.advance(2),this.stream.advanceWhileChar((function(e){return e===i||e===o})),!0)},e.prototype._hexadecimal=function(){var e=this.stream.peekChar(0),t=this.stream.peekChar(1);if(e===i&&(t===h||t===l)){this.stream.advance(2);for(var n=this.stream.peekChar();n>=i&&n<=s||n>=a&&n<=d||n>=c&&n<=f;)this.stream.advance(1),n=this.stream.peekChar();return!0}return!1},e.prototype._number=function(){var e;return(e=this.stream.peekChar())>=i&&e<=s&&(this.stream.advance(1),this.stream.advanceWhileChar((function(e){return e>=i&&e<=s})),!0)},e.prototype._newline=function(){var e=this.stream.peekChar();switch(e){case v:case b:case y:return this.stream.advance(1),e===v&&this.stream.advanceIfChar(y),!0}return!1},e.prototype._whitespace=function(){return this.stream.advanceWhileChar((function(e){return e===x||e===T}))>0},e}();t.Scanner=L})),define("vscode-nls/vscode-nls",["require","exports"],(function(e,t){"use strict";function n(e,t){return 0===t.length?e:e.replace(/\{(\d+)\}/g,(function(e,n){var r=n[0];return void 0!==t[r]?t[r]:e}))}function r(e,t){for(var r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];return n(t,r)}function i(e){return r}Object.defineProperty(t,"__esModule",{value:!0}),t.loadMessageBundle=i,t.config=function(e){return i}})),define("vscode-nls",["vscode-nls/vscode-nls"],(function(e){return e})),function(e){if("object"==typeof module&&"object"==typeof module.exports){var t=e(require,exports);void 0!==t&&(module.exports=t)}else"function"==typeof define&&define.amd&&define("@paul80nd/vscode-rcasm-languageservice/parser/rcasmErrors",["require","exports","vscode-nls"],e)}((function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=e("vscode-nls").loadMessageBundle(),r=function(e,t){this.id=e,this.message=t};t.RcasmIssueType=r,t.ParseError={BinaryExpected:new r("rcasm-binaryexpected",n("expected.binary","binary expected")),ConstantExpected:new r("rcasm-constantexpected",n("expected.constant","constant expected")),ConstantOrLabelExpected:new r("rcasm-constantorlabelexpected",n("expected.constantorlabel","constant or label expected")),CommaExpected:new r("rcasm-commaexpected",n("expected.comma","comma expected")),EolExpected:new r("rcasm-eolexpected",n("expected.eol","end of line expected")),HexadecimalExpected:new r("rcasm-hexadecimalexpected",n("expected.hexadecimal","hexadecimal expected")),IntegerExpected:new r("rcasm-integerexpected",n("expected.integer","integer expected")),LabelRefExpected:new r("rcasm-labelrefexpected",n("expected.labelref","label reference expected")),RegisterExpected:new r("rcasm-registerexpected",n("expected.register","register expected")),OpcodeExpected:new r("rcasm-opcodeexpected",n("expected.opcode","opcode expected")),OpcodeLiteralExpected:new r("rcasm-opcodeliteralexpected",n("expected.opcodeliteral","opcode literal expected")),OpcodeLabelOrCommentExpected:new r("rcasm-opcodelabelorcommentexpected",n("expected.opcodelabelorcomment","opcode, label or comment expected")),ConstantOutOfRange:new r("rcasm-constantoutofrange",n("outofrange.constant","constant out of range")),RegisterOutOfRange:new r("rcasm-registeroutofrange",n("outofrange.register","register out of range"))}}));var __extends=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();!function(e){if("object"==typeof module&&"object"==typeof module.exports){var t=e(require,exports);void 0!==t&&(module.exports=t)}else"function"==typeof define&&define.amd&&define("@paul80nd/vscode-rcasm-languageservice/parser/rcasmNodes",["require","exports"],e)}((function(e,t){"use strict";var n,r,i;function o(e,t){var n=null;return!e||t<e.offset||t>e.end?null:(e.accept((function(e){return-1===e.offset&&-1===e.length||e.offset<=t&&e.end>=t&&(n?e.length<=n.length&&(n=e):n=e,!0)})),n)}Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.Undefined=0]="Undefined",e[e.Program=1]="Program",e[e.Comment=2]="Comment",e[e.Instruction=3]="Instruction",e[e.Constant=4]="Constant",e[e.Label=5]="Label",e[e.LabelRef=6]="LabelRef",e[e.Register=7]="Register",e[e.Opcode=8]="Opcode"}(n=t.NodeType||(t.NodeType={})),function(e){e[e.Label=0]="Label"}(t.ReferenceType||(t.ReferenceType={})),function(e){e[e.A=0]="A",e[e.B=1]="B",e[e.C=2]="C",e[e.D=3]="D",e[e.J=4]="J",e[e.J1=5]="J1",e[e.J2=6]="J2",e[e.M=7]="M",e[e.M1=8]="M1",e[e.M2=9]="M2",e[e.X=10]="X",e[e.XY=11]="XY",e[e.Y=12]="Y"}(r=t.RegisterType||(t.RegisterType={})),function(e){e[e.NOP=0]="NOP",e[e.ADD=1]="ADD",e[e.INC=2]="INC",e[e.AND=3]="AND",e[e.ORR=4]="ORR",e[e.EOR=5]="EOR",e[e.NOT=6]="NOT",e[e.ROL=7]="ROL",e[e.CMP=8]="CMP",e[e.MOV=9]="MOV",e[e.CLR=10]="CLR",e[e.LDI=11]="LDI",e[e.OPC=12]="OPC",e[e.JMP=13]="JMP",e[e.JSR=14]="JSR",e[e.RTS=15]="RTS",e[e.BNE=16]="BNE",e[e.BEQ=17]="BEQ",e[e.BLT=18]="BLT",e[e.BLE=19]="BLE",e[e.BMI=20]="BMI",e[e.BCS=21]="BCS"}(i=t.OpcodeType||(t.OpcodeType={})),t.getNodeAtOffset=o,t.getNodePath=function(e,t){for(var n=o(e,t),r=[];n;)r.unshift(n),n=n.parent;return r};var s=function(){function e(e,t,n){void 0===e&&(e=-1),void 0===t&&(t=-1),this.parent=null,this.offset=e,this.length=t,n&&(this.nodeType=n)}return Object.defineProperty(e.prototype,"end",{get:function(){return this.offset+this.length},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"type",{get:function(){return this.nodeType||n.Undefined},set:function(e){this.nodeType=e},enumerable:!0,configurable:!0}),e.prototype.getTextProvider=function(){for(var e=this;e&&!e.textProvider;)e=e.parent;return e?e.textProvider:function(){return"unknown"}},e.prototype.getText=function(){return this.getTextProvider()(this.offset,this.length)},e.prototype.matches=function(e){return this.length===e.length&&this.getTextProvider()(this.offset,this.length)===e},e.prototype.accept=function(e){if(e(this)&&this.children)for(var t=0,n=this.children;t<n.length;t++){n[t].accept(e)}},e.prototype.acceptVisitor=function(e){this.accept(e.visitNode.bind(e))},e.prototype.adoptChild=function(e,t){if(void 0===t&&(t=-1),e.parent&&e.parent.children){var n=e.parent.children.indexOf(e);n>=0&&e.parent.children.splice(n,1)}e.parent=this;var r=this.children;return r||(r=this.children=[]),-1!==t?r.splice(t,0,e):r.push(e),e},e.prototype.attachTo=function(e,t){return void 0===t&&(t=-1),e&&e.adoptChild(this,t),this},e.prototype.collectIssues=function(e){this.issues&&e.push.apply(e,this.issues)},e.prototype.addIssue=function(e){this.issues||(this.issues=[]),this.issues.push(e)},e.prototype.isErroneous=function(e){return void 0===e&&(e=!1),!!(this.issues&&this.issues.length>0)||e&&Array.isArray(this.children)&&this.children.some((function(e){return e.isErroneous(!0)}))},e.prototype.setNode=function(e,t,n){return void 0===n&&(n=-1),!!t&&(t.attachTo(this,n),this[e]=t,!0)},e.prototype.addChild=function(e){return!!e&&(this.children||(this.children=[]),e.attachTo(this),this.updateOffsetAndLength(e),!0)},e.prototype.updateOffsetAndLength=function(e){(e.offset<this.offset||-1===this.offset)&&(this.offset=e.offset);var t=e.end;(t>this.end||-1===this.length)&&(this.length=t-this.offset)},e.prototype.getChildren=function(){return this.children?this.children.slice(0):[]},e.prototype.getParent=function(){for(var e=this.parent;e instanceof a;)e=e.parent;return e},e}();t.Node=s;var a=function(e){function t(t,n){void 0===n&&(n=-1);var r=e.call(this,-1,-1)||this;return r.attachTo(t,n),r.offset=-1,r.length=-1,r}return __extends(t,e),t}(s);t.Nodelist=a;var c=function(e){function t(t,n){return e.call(this,t,n)||this}return __extends(t,e),Object.defineProperty(t.prototype,"type",{get:function(){return n.Program},enumerable:!0,configurable:!0}),t}(s);t.Program=c;var u=function(e){function t(t,n){return e.call(this,t,n)||this}return __extends(t,e),Object.defineProperty(t.prototype,"type",{get:function(){return n.Comment},enumerable:!0,configurable:!0}),t}(s);t.Comment=u;var p=function(e){function t(t,n){return e.call(this,t,n)||this}return __extends(t,e),Object.defineProperty(t.prototype,"type",{get:function(){return n.Instruction},enumerable:!0,configurable:!0}),t.prototype.setLabel=function(e){return this.setNode("label",e)},t.prototype.getLabel=function(){return this.label},t.prototype.setOpcode=function(e){return this.setNode("opcode",e)},t.prototype.getOpcode=function(){return this.opcode},t.prototype.setComment=function(e){return this.setNode("comment",e)},t.prototype.getComment=function(){return this.opcode},t}(s);t.Instruction=p;var d=function(e){function t(t,n){return e.call(this,t,n)||this}return __extends(t,e),Object.defineProperty(t.prototype,"type",{get:function(){return n.Label},enumerable:!0,configurable:!0}),t}(s);t.Label=d;var f=function(e){function t(t,n){return e.call(this,t,n)||this}return __extends(t,e),Object.defineProperty(t.prototype,"type",{get:function(){return n.LabelRef},enumerable:!0,configurable:!0}),t}(s);t.LabelRef=f;var l=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.value=0,r}return __extends(t,e),Object.defineProperty(t.prototype,"type",{get:function(){return n.Constant},enumerable:!0,configurable:!0}),t}(s);t.Constant=l;var h=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.opcode=i.NOP,r}return __extends(t,e),Object.defineProperty(t.prototype,"type",{get:function(){return n.Opcode},enumerable:!0,configurable:!0}),t.prototype.setPrimaryParam=function(e){return this.setNode("primaryParam",e)},t.prototype.getPrimaryParam=function(){return this.primaryParam},t.prototype.setSecondaryParam=function(e){return this.setNode("secondaryParam",e)},t.prototype.getSecondaryParam=function(){return this.secondaryParam},t}(s);t.Opcode=h;var m=function(e){function t(t,n){var i=e.call(this,t,n)||this;return i.register=r.A,i}return __extends(t,e),Object.defineProperty(t.prototype,"type",{get:function(){return n.Register},enumerable:!0,configurable:!0}),t}(s);t.Register=m,function(e){e[e.Ignore=1]="Ignore",e[e.Warning=2]="Warning",e[e.Error=4]="Error"}(t.Level||(t.Level={}));var g=function(){function e(e,t,n,r,i,o){void 0===i&&(i=e.offset),void 0===o&&(o=e.length),this.node=e,this.rule=t,this.level=n,this.message=r||t.message,this.offset=i,this.length=o}return e.prototype.getRule=function(){return this.rule},e.prototype.getLevel=function(){return this.level},e.prototype.getOffset=function(){return this.offset},e.prototype.getLength=function(){return this.length},e.prototype.getNode=function(){return this.node},e.prototype.getMessage=function(){return this.message},e}();t.Marker=g;var y=function(){function e(){this.entries=[]}return e.entries=function(t){var n=new e;return t.acceptVisitor(n),n.entries},e.prototype.visitNode=function(e){return e.isErroneous()&&e.collectIssues(this.entries),!0},e}();t.ParseErrorCollector=y})),function(e){if("object"==typeof module&&"object"==typeof module.exports){var t=e(require,exports);void 0!==t&&(module.exports=t)}else"function"==typeof define&&define.amd&&define("@paul80nd/vscode-rcasm-languageservice/parser/rcasmParser",["require","exports","./rcasmScanner","./rcasmErrors","./rcasmNodes","../rcasmLanguageTypes"],e)}((function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=e("./rcasmScanner"),r=e("./rcasmErrors"),i=e("./rcasmNodes"),o=e("../rcasmLanguageTypes"),s={};s.add=i.OpcodeType.ADD,s.inc=i.OpcodeType.INC,s.and=i.OpcodeType.AND,s.orr=i.OpcodeType.ORR,s.eor=i.OpcodeType.EOR,s.not=i.OpcodeType.NOT,s.rol=i.OpcodeType.ROL,s.cmp=i.OpcodeType.CMP,s.mov=i.OpcodeType.MOV,s.clr=i.OpcodeType.CLR,s.ldi=i.OpcodeType.LDI,s.opc=i.OpcodeType.OPC,s.jmp=i.OpcodeType.JMP,s.jsr=i.OpcodeType.JSR,s.rts=i.OpcodeType.RTS,s.bne=i.OpcodeType.BNE,s.beq=i.OpcodeType.BEQ,s.blt=i.OpcodeType.BLT,s.ble=i.OpcodeType.BLE,s.bmi=i.OpcodeType.BMI,s.bcs=i.OpcodeType.BCS;var a={};a.a=i.RegisterType.A,a.b=i.RegisterType.B,a.c=i.RegisterType.C,a.d=i.RegisterType.D,a.m1=i.RegisterType.M1,a.m2=i.RegisterType.M2,a.m=i.RegisterType.M,a.x=i.RegisterType.X,a.y=i.RegisterType.Y,a.xy=i.RegisterType.XY,a.j1=i.RegisterType.J1,a.j2=i.RegisterType.J2,a.j=i.RegisterType.J;var c=function(){function e(e){void 0===e&&(e=new n.Scanner),this.scanner=e,this.token={type:o.TokenType.EOF,offset:-1,len:0,text:""},this.prevToken=void 0}return e.prototype.peek=function(e){return e===this.token.type},e.prototype.peekIsBeyondOpcode=function(){return this.peek(o.TokenType.Comment)||this.peek(o.TokenType.EOL)||this.peek(o.TokenType.EOF)},e.prototype.consumeToken=function(){this.prevToken=this.token,this.token=this.scanner.scan()},e.prototype.accept=function(e){return e===this.token.type&&(this.consumeToken(),!0)},e.prototype.resync=function(e,t){for(;;){if(e&&-1!==e.indexOf(this.token.type))return this.consumeToken(),!0;if(t&&-1!==t.indexOf(this.token.type))return!0;if(this.token.type===o.TokenType.EOF)return!1;this.token=this.scanner.scan()}},e.prototype.create=function(e){return new e(this.token.offset,this.token.len)},e.prototype.finish=function(e,t,n,r){if(!(e instanceof i.Nodelist)&&(t&&this.markError(e,t,n,r),this.prevToken)){var o=this.prevToken.offset+this.prevToken.len;e.length=o>e.offset?o-e.offset:0}return e},e.prototype.markError=function(e,t,n,r){this.token!==this.lastErrorToken&&(e.addIssue(new i.Marker(e,t,i.Level.Error,void 0,this.token.offset,this.token.len)),this.lastErrorToken=this.token),(n||r)&&this.resync(n,r)},e.prototype.parseProgram=function(e){var t=e.version,n=e.getText();return this.internalParse(n,this._parseProgram,(function(r,i){if(e.version!==t)throw new Error("Underlying model has changed, AST is no longer valid");return n.substr(r,i)}))},e.prototype.internalParse=function(e,t,n){this.scanner.setSource(e),this.token=this.scanner.scan();var r=t.bind(this)();return r&&(r.textProvider=n||function(t,n){return e.substr(t,n)}),r},e.prototype._parseProgram=function(){var e=this.create(i.Program);if(this.peek(o.TokenType.EOF))return this.finish(e);do{this.accept(o.TokenType.EOL)||e.addChild(this._parseCommentOrInstruction())||(this.consumeToken(),this.markError(e,r.ParseError.OpcodeLabelOrCommentExpected))}while(!this.peek(o.TokenType.EOF));return this.finish(e)},e.prototype._parseCommentOrInstruction=function(){var e=this._parseComment()||this._parseInstruction();return!e||this.peek(o.TokenType.EOF)||this.accept(o.TokenType.EOL)||this.markError(e,r.ParseError.EolExpected),e},e.prototype._parseInstruction=function(){if(!this.peek(o.TokenType.Identifier)&&!this.peek(o.TokenType.Label))return null;var e=this.create(i.Instruction);return e.setLabel(this._parseLabel()),e.setOpcode(this._parseOpcodeAndParams())||(this.markError(e,r.ParseError.OpcodeExpected),this.consumeToken()),e.setComment(this._parseComment()),this.finish(e)},e.prototype._parseComment=function(){if(!this.peek(o.TokenType.Comment))return null;var e=this.create(i.Comment);return this.consumeToken(),this.finish(e)},e.prototype._parseOpcodeAndParams=function(){var e=this,t=this._parseOpcode();if(!t)return null;switch(t.opcode){case i.OpcodeType.ADD:case i.OpcodeType.INC:case i.OpcodeType.AND:case i.OpcodeType.ORR:case i.OpcodeType.EOR:case i.OpcodeType.NOT:case i.OpcodeType.ROL:case i.OpcodeType.CMP:if(!t.setPrimaryParam(this._parseAluRegister()))return this.finish(t,r.ParseError.RegisterExpected);break;case i.OpcodeType.LDI:return this._processLoadImmediate(t);case i.OpcodeType.MOV:return this._processBinaryOpcode(t,(function(){return e._parseMoveRegister()}),r.ParseError.RegisterExpected,(function(){return e._parseMoveRegister()}),r.ParseError.RegisterExpected);case i.OpcodeType.CLR:return this._processUnaryOpcode(t,(function(){return e._parseMoveRegister()}),r.ParseError.RegisterExpected);case i.OpcodeType.OPC:return this._processUnaryOpcode(t,(function(){return e._parseOpcodeLiteral()}),r.ParseError.OpcodeLiteralExpected);case i.OpcodeType.JMP:case i.OpcodeType.JSR:case i.OpcodeType.BNE:case i.OpcodeType.BEQ:case i.OpcodeType.BLT:case i.OpcodeType.BLE:case i.OpcodeType.BMI:case i.OpcodeType.BCS:return this._processUnaryOpcode(t,(function(){return e._parseLabelRef()}),r.ParseError.LabelRefExpected)}return this.finish(t)},e.prototype._processUnaryOpcode=function(e,t,n){return e.setPrimaryParam(t())?this.finish(e):this.finish(e,n)},e.prototype._processBinaryOpcode=function(e,t,n,i,s){if(!e.setPrimaryParam(t())){if(this.markError(e,n),this.peekIsBeyondOpcode())return this.finish(e);this.consumeToken()}if(!this.accept(o.TokenType.Comma)){if(this.markError(e,r.ParseError.CommaExpected),this.peekIsBeyondOpcode())return this.finish(e);this.consumeToken()}return e.setSecondaryParam(i())?this.finish(e):this.finish(e,s)},e.prototype._processLoadImmediate=function(e){var t=this._parseSetRegister();if(!e.setPrimaryParam(t)){if(this.markError(e,r.ParseError.RegisterExpected),this.peekIsBeyondOpcode())return this.finish(e);this.consumeToken()}var n=(null==t?void 0:t.register)===i.RegisterType.J||(null==t?void 0:t.register)===i.RegisterType.M;if(!this.accept(o.TokenType.Comma)){if(this.markError(e,r.ParseError.CommaExpected),this.peekIsBeyondOpcode())return this.finish(e);this.consumeToken()}var s=n?this._parseHexadecimal(0,65535)||this._parseLabelRef():this._parseInteger(-16,15);return e.setSecondaryParam(s)?this.finish(e):this.finish(e,n?r.ParseError.ConstantOrLabelExpected:r.ParseError.IntegerExpected)},e.prototype._parseLabel=function(){if(!this.peek(o.TokenType.Label))return null;var e=this.create(i.Label);return this.consumeToken(),this.finish(e)},e.prototype._parseLabelRef=function(){if(!this.peek(o.TokenType.Identifier))return null;var e=this.create(i.LabelRef);return this.consumeToken(),this.finish(e)},e.prototype._parseOpcodeLiteral=function(){return this._parseHexadecimal(0,255)||this._parseBinary(0,255)},e.prototype._parseOpcode=function(){if(!this.peek(o.TokenType.Identifier))return null;var e=s[this.token.text.toLowerCase()];if(void 0===e)return null;var t=this.create(i.Opcode);return t.opcode=e,this.consumeToken(),t},e.prototype._parseAluRegister=function(){var e=this._parseRegister([i.RegisterType.A,i.RegisterType.D]);return e||((e=this.create(i.Register)).register=i.RegisterType.A),e},e.prototype._parseSetRegister=function(){return this._parseRegister([i.RegisterType.A,i.RegisterType.B,i.RegisterType.M,i.RegisterType.J])},e.prototype._parseMoveRegister=function(){return this._parseRegister([i.RegisterType.A,i.RegisterType.B,i.RegisterType.C,i.RegisterType.D])},e.prototype._parseRegister=function(e){if(!this.peek(o.TokenType.Identifier))return null;var t=a[this.token.text.toLowerCase()];if(void 0===t)return null;var n=this.create(i.Register);return n.register=t,e&&!e.includes(t)&&this.markError(n,r.ParseError.RegisterOutOfRange),this.consumeToken(),this.finish(n)},e.prototype._parseConstant=function(){return this._parseHexadecimal()||this._parseBinary()||this._parseInteger()},e.prototype._parseHexadecimal=function(e,t){if(void 0===e&&(e=0),void 0===t&&(t=Number.POSITIVE_INFINITY),!this.peek(o.TokenType.Hexadecimal))return null;var n=this.create(i.Constant),s=parseInt(this.token.text,16);return isNaN(s)&&this.markError(n,r.ParseError.HexadecimalExpected),n.value=s,(n.value<e||n.value>t)&&this.markError(n,r.ParseError.ConstantOutOfRange),this.consumeToken(),this.finish(n)},e.prototype._parseBinary=function(e,t){if(void 0===e&&(e=0),void 0===t&&(t=Number.POSITIVE_INFINITY),!this.peek(o.TokenType.Binary))return null;var n=this.create(i.Constant),s=parseInt(this.token.text.substring(2),2);return isNaN(s)&&this.markError(n,r.ParseError.BinaryExpected),n.value=s,(n.value<e||n.value>t)&&this.markError(n,r.ParseError.ConstantOutOfRange),this.consumeToken(),this.finish(n)},e.prototype._parseInteger=function(e,t){if(void 0===e&&(e=Number.NEGATIVE_INFINITY),void 0===t&&(t=Number.POSITIVE_INFINITY),!this.peek(o.TokenType.Integer)&&!this.peek(o.TokenType.Plus)&&!this.peek(o.TokenType.Minus))return null;var n=this.peek(o.TokenType.Minus);if((this.peek(o.TokenType.Plus)||this.peek(o.TokenType.Minus))&&this.consumeToken(),!this.peek(o.TokenType.Integer))return null;var s=parseInt(this.token.text);if(isNaN(s))return null;s=n?-s:s;var a=this.create(i.Constant);return a.value=s,(a.value<e||a.value>t)&&this.markError(a,r.ParseError.ConstantOutOfRange),this.consumeToken(),this.finish(a)},e}();t.Parser=c})),function(e){if("object"==typeof module&&"object"==typeof module.exports){var t=e(require,exports);void 0!==t&&(module.exports=t)}else"function"==typeof define&&define.amd&&define("@paul80nd/vscode-rcasm-languageservice/services/rcasmValidation",["require","exports","../parser/rcasmNodes","vscode-languageserver-types"],e)}((function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=e("../parser/rcasmNodes"),r=e("vscode-languageserver-types"),i=function(){function e(){}return e.prototype.configure=function(e){this.settings=e},e.prototype.doValidation=function(e,t,i){if(void 0===i&&(i=this.settings),i&&!1===i.validate)return[];var o=[];return o.push.apply(o,n.ParseErrorCollector.entries(t)),o.filter((function(e){return e.getLevel()!==n.Level.Ignore})).map((function(t){var i=r.Range.create(e.positionAt(t.getOffset()),e.positionAt(t.getOffset()+t.getLength())),o=e.languageId;return{code:t.getRule().id,source:o,message:t.getMessage(),severity:t.getLevel()===n.Level.Warning?r.DiagnosticSeverity.Warning:r.DiagnosticSeverity.Error,range:i}}))},e}();t.RCASMValidation=i})),function(e){if("object"==typeof module&&"object"==typeof module.exports){var t=e(require,exports);void 0!==t&&(module.exports=t)}else"function"==typeof define&&define.amd&&define("@paul80nd/vscode-rcasm-languageservice/languageFacts/data/customData",["require","exports"],e)}((function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.rcasmData={version:1,mnemonics:[{name:"add",summary:"Arithmetic Add [ALU]",description:"Adds the contents of register B and C (B+C) placing the result in register A or D.",synopsis:"{0} = B + C",syntax:"[ a | d ]"},{name:"and",summary:"Logic And [ALU]",description:"Performs a bitwise AND operation on register B and C (B&C) placing the result in register A or D.",synopsis:"{0} = B & C",syntax:"[ a | d ]"},{name:"bcs",summary:"Branch if Carry Set [GOTO]",snippet:"bcs ${1:label}",description:"Jumps to the given address if the carry flag is set.",synopsis:"PC = {0} [if CY]",syntax:"<label>"},{name:"beq",summary:"Branch if Equal/Zero [GOTO]",snippet:"beq ${1:label}",description:"Jumps to the given address if the zero flag is set (equal).",synopsis:"PC = {0} [if Z]",syntax:"<label>"},{name:"ble",summary:"Branch if Less Than or Equal (Sign+Zero) [GOTO]",snippet:"ble ${1:label}",description:"Jumps to the given address if the sign or zero flag is set (less than or equal).",synopsis:"PC = {0} [if S or Z]",syntax:"<label>"},{name:"blt",summary:"Branch if Less Than (Sign) [GOTO]",snippet:"blt ${1:label}",description:"Jumps to the given address if the sign flag is set (less than).",synopsis:"PC = {0} [if S]",syntax:"<label>"},{name:"bmi",summary:"Branch if Minus/Sign [GOTO]",snippet:"bmi ${1:label}",description:"Jumps to the given address if the sign flag is set (negative).",synopsis:"PC = {0} [if S]",syntax:"<label>"},{name:"bne",summary:"Branch if Not Equal/Zero [GOTO]",snippet:"bne ${1:label}",description:"Jumps to the given address if the zero flag is not set (not equal).",synopsis:"PC = {0} [if not Z]",syntax:"<label>"},{name:"clr",summary:"Zero Value [MOV8]",description:"Clears the content (=0) of a given 8-bit register.",synopsis:"{0} = 0",syntax:"<target>{a,d}"},{name:"cmp",summary:"Compare (Logic Xor) [ALU]",description:"Compares the values in register B and C setting the zero flag if the same (affects register A or D) (equivalent to eor).",synopsis:"{0} = B != C",syntax:"[ a | d ]"},{name:"eor",summary:"Logic Xor [ALU]",description:"Performs a bitwise XOR operation on register B and C (B^C) placing the result in register A or D.",synopsis:"{0} = B ^ C",syntax:"[ a | d ]"},{name:"inc",summary:"Increment [ALU]",description:"Increments contents of register B placing the result in register A or D",synopsis:"{0} = B + 1",syntax:"[ a | d ]"},{name:"jmp",summary:"Jump to Label [GOTO]",snippet:"jmp ${1:label}",description:"Unconditionally jumps to the given address.",synopsis:"PC = {0}",syntax:"<label>"},{name:"jsr",summary:"Call Subroutine (Jump and Link) [GOTO]",snippet:"jsr ${1:label}",description:"Calls the subroutine at the given address.",synopsis:"XY = PC, PC = {0}",syntax:"<label>"},{name:"ldi",summary:"Load Immediate [SETAB]",snippet:"ldi ${1:a},${2:0}",description:"Loads an 8-bit value in to register A/B or a 16-bit value in to register M/J.",synopsis:"{0} = {1}",syntax:"[ <target>{a|b} , <value>{-16,15} ] | [ <target>{m|j} , [ <value>{0x0000,0xFFFF} | <label> ] ]"},{name:"mov",summary:"Copy Register to Register [MOV8]",snippet:"mov ${1:b},${2:a}",description:"Copies the content of one 8-bit register to another.",synopsis:"{0} = {1}",syntax:"<destination>{a,d} , <source>{a,d}"},{name:"not",summary:"Logic Not [ALU]",description:"Performs a bitwise NOT operation on register B (~B) placing the result in register A or D.",synopsis:"{0} = ~B",syntax:"[ a | d ]"},{name:"opc",summary:"Literal Opcode",snippet:"opc ${1:opcode}",description:"Performs the given machine opcode directly.",syntax:"[ <opcode>{0x00,0xFF} | <opcode>{0b00000000,0b11111111} ]"},{name:"orr",summary:"Logic Or [ALU]",description:"Performs a bitwise OR operation on register B and C (B|C) placing the result in register A or D.",synopsis:"{0} = B | C",syntax:"[ a | d ]"},{name:"rol",summary:"Bitwise Circular Shift Left [ALU]",description:"Performs a bitwise left rotation on register B (<<B) placing the result in register A or D.",synopsis:"{0} = <<B",syntax:"[ a | d ]"}]}})),function(e){if("object"==typeof module&&"object"==typeof module.exports){var t=e(require,exports);void 0!==t&&(module.exports=t)}else"function"==typeof define&&define.amd&&define("@paul80nd/vscode-rcasm-languageservice/utils/objects",["require","exports"],e)}((function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.values=function(e){return Object.keys(e).map((function(t){return e[t]}))},t.isDefined=function(e){return void 0!==e}})),function(e){if("object"==typeof module&&"object"==typeof module.exports){var t=e(require,exports);void 0!==t&&(module.exports=t)}else"function"==typeof define&&define.amd&&define("@paul80nd/vscode-rcasm-languageservice/languageFacts/dataManager",["require","exports","../utils/objects"],e)}((function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=e("../utils/objects"),r=function(){function e(e){this.dataProviders=e,this._mnemonicSet={},this._mnemonics=[],this.collectData()}return e.prototype.collectData=function(){var e=this;this.dataProviders.forEach((function(t){t.provideMnemonics().forEach((function(t){e._mnemonicSet[t.name]||(e._mnemonicSet[t.name]=t)}))})),this._mnemonics=n.values(this._mnemonicSet)},e.prototype.getMnemonic=function(e){return this._mnemonicSet[e]},e.prototype.getMnemonics=function(){return this._mnemonics},e}();t.RCASMDataManager=r})),function(e){if("object"==typeof module&&"object"==typeof module.exports){var t=e(require,exports);void 0!==t&&(module.exports=t)}else"function"==typeof define&&define.amd&&define("@paul80nd/vscode-rcasm-languageservice/languageFacts/dataProvider",["require","exports"],e)}((function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e){this._mnemonics=[],this.addData(e)}return e.prototype.provideMnemonics=function(){return this._mnemonics},e.prototype.addData=function(e){e.mnemonics&&(this._mnemonics=this._mnemonics.concat(e.mnemonics))},e}();t.RCASMDataProvider=n})),function(e){if("object"==typeof module&&"object"==typeof module.exports){var t=e(require,exports);void 0!==t&&(module.exports=t)}else"function"==typeof define&&define.amd&&define("@paul80nd/vscode-rcasm-languageservice/languageFacts/entry",["require","exports"],e)}((function(e,t){"use strict";function n(e){if(!e.description||""===e.description)return"";if("string"!=typeof e.description)return e.description.value;var t="";return t+=e.description,"syntax"in e&&(t+="\n\nSyntax: "+e.syntax),t}function r(e){if(!e.description||""===e.description)return"";var t="";return"string"==typeof e.description?t+=e.description:t=e.description.value,"syntax"in e&&(t+="\n\nSyntax: `"+e.syntax+"`"),t}function i(e,t){if(!t||0===t.length)return e;for(var n=0;n<t.length;n++)e=e.replace("{"+n+"}",t[n]);return e}function o(e){if(!e.synopsis||""===e.synopsis)return"";var t="";return e.summary&&(t+=e.summary+"\n\n"),t+=e.synopsis}function s(e){if(!e.synopsis||""===e.synopsis)return"";var t="";return e.summary&&(t+=e.summary+"\n\n"),t+="`"+e.synopsis+"`"}Object.defineProperty(t,"__esModule",{value:!0}),t.getEntryDescription=function(e,t){return t?{kind:"markdown",value:r(e)}:{kind:"plaintext",value:n(e)}},t.getEntrySpecificDescription=function(e,t,n){return n?{kind:"markdown",value:i(s(e),t)}:{kind:"plaintext",value:i(o(e),t)}}})),function(e){if("object"==typeof module&&"object"==typeof module.exports){var t=e(require,exports);void 0!==t&&(module.exports=t)}else"function"==typeof define&&define.amd&&define("@paul80nd/vscode-rcasm-languageservice/languageFacts/facts",["require","exports","./data/customData","./dataManager","./dataProvider","./entry"],e)}((function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=e("./data/customData"),r=e("./dataManager"),i=e("./dataProvider");!function(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}(e("./entry")),t.rcasmDataManager=new r.RCASMDataManager([new i.RCASMDataProvider(n.rcasmData)])})),function(e){if("object"==typeof module&&"object"==typeof module.exports){var t=e(require,exports);void 0!==t&&(module.exports=t)}else"function"==typeof define&&define.amd&&define("@paul80nd/vscode-rcasm-languageservice/services/rcasmCompletion",["require","exports","../languageFacts/facts","vscode-languageserver-types","../rcasmLanguageTypes","../utils/objects"],e)}((function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=e("../languageFacts/facts"),r=e("vscode-languageserver-types"),i=e("../rcasmLanguageTypes"),o=e("../utils/objects"),s=function(){function e(e){this.clientCapabilities=e}return e.prototype.doComplete=function(e,t,n,i){this.offset=e.offsetAt(t),this.position=t,this.currentWord=function(e,t){var n=t-1,r=e.getText();for(;n>=0&&-1===" \t\n\r:,".indexOf(r.charAt(n));)n--;return r.substring(n+1,t)}(e,this.offset),this.defaultReplaceRange=r.Range.create(r.Position.create(this.position.line,this.position.character-this.currentWord.length),this.position),this.textDocument=e,this.program=n;try{var o={isIncomplete:!1,items:[]};return e.getText(r.Range.create(r.Position.create(this.position.line,0),this.position)).match(/^([a-z]+:)?([ \t]+)?([a-z]{0,3})$/i)?(this.getCompletionsForMnemonic(o),o):o}finally{this.position=null,this.currentWord=null,this.textDocument=null,this.program=null,this.defaultReplaceRange=null}},e.prototype.getCompletionsForMnemonic=function(e){var t=this;return n.rcasmDataManager.getMnemonics().forEach((function(o){var s,a,c;a=t.getCompletionRange(null),c=null!==(s=o.snippet)&&void 0!==s?s:o.name;var u={label:o.name,detail:o.summary,documentation:n.getEntryDescription(o,t.doesSupportMarkdown()),textEdit:r.TextEdit.replace(a,c),insertTextFormat:i.InsertTextFormat.Snippet,kind:r.CompletionItemKind.Function};e.items.push(u)})),e},e.prototype.doesSupportMarkdown=function(){if(!o.isDefined(this.supportsMarkdown)){if(!o.isDefined(this.clientCapabilities))return this.supportsMarkdown=!0,this.supportsMarkdown;var e=this.clientCapabilities&&this.clientCapabilities.textDocument&&this.clientCapabilities.textDocument.hover;this.supportsMarkdown=e&&e.contentFormat&&Array.isArray(e.contentFormat)&&-1!==e.contentFormat.indexOf(r.MarkupKind.Markdown)}return this.supportsMarkdown},e.prototype.getCompletionRange=function(e){if(e&&e.offset<=this.offset&&this.offset<=e.end){var t=-1!==e.end?this.textDocument.positionAt(e.end):this.position,n=this.textDocument.positionAt(e.offset);if(n.line===t.line)return r.Range.create(n,t)}return this.defaultReplaceRange},e}();t.RCASMCompletion=s})),function(e){if("object"==typeof module&&"object"==typeof module.exports){var t=e(require,exports);void 0!==t&&(module.exports=t)}else"function"==typeof define&&define.amd&&define("@paul80nd/vscode-rcasm-languageservice/services/rcasmHover",["require","exports","../parser/rcasmNodes","../languageFacts/facts","vscode-languageserver-types","../utils/objects"],e)}((function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=e("../parser/rcasmNodes"),r=e("../languageFacts/facts"),i=e("vscode-languageserver-types"),o=e("../utils/objects"),s=function(){function e(e){this.clientCapabilities=e}return e.prototype.doHover=function(e,t,o){function s(t){return i.Range.create(e.positionAt(t.offset),e.positionAt(t.end))}for(var a=e.offsetAt(t),c=n.getNodePath(o,a),u=null,p=0;p<c.length;p++){var d=c[p];if(d instanceof n.Opcode){var f=d,l=n.OpcodeType[f.opcode].toLowerCase(),h=r.rcasmDataManager.getMnemonic(l);if(h){var m=this.getParamNames(f);u={contents:r.getEntrySpecificDescription(h,m,this.doesSupportMarkdown()),range:s(d)}}}else;}return u&&(u.contents=this.convertContents(u.contents)),u},e.prototype.getParamNames=function(e){var t=[];return e.primaryParam?t.push(this.getParamName(e.primaryParam,e.opcode)):t.push("?"),e.secondaryParam?t.push(this.getParamName(e.secondaryParam,e.opcode)):t.push("?"),t},e.prototype.getParamName=function(e,t){if(e.isErroneous())return"?";if(e instanceof n.Register){var r=e;return n.RegisterType[r.register]}if(e instanceof n.LabelRef)return"("+e.getText()+")";if(e instanceof n.Constant){var i=e;return t===n.OpcodeType.LDI&&i.value>15?"0x"+i.value.toString(16).toUpperCase():i.value.toString()}return"?"},e.prototype.convertContents=function(e){return this.doesSupportMarkdown()?e:"string"==typeof e?e:"kind"in e?{kind:"plaintext",value:e.value}:Array.isArray(e)?e.map((function(e){return"string"==typeof e?e:e.value})):e.value},e.prototype.doesSupportMarkdown=function(){var e;if(!o.isDefined(this.supportsMarkdown)){if(!o.isDefined(this.clientCapabilities))return this.supportsMarkdown=!0,this.supportsMarkdown;var t=(null===(e=this.clientCapabilities)||void 0===e?void 0:e.textDocument)&&this.clientCapabilities.textDocument.hover;this.supportsMarkdown=t&&t.contentFormat&&Array.isArray(t.contentFormat)&&-1!==t.contentFormat.indexOf(i.MarkupKind.Markdown)}return this.supportsMarkdown},e}();t.RCASMHover=s}));__extends=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();!function(e){if("object"==typeof module&&"object"==typeof module.exports){var t=e(require,exports);void 0!==t&&(module.exports=t)}else"function"==typeof define&&define.amd&&define("@paul80nd/vscode-rcasm-languageservice/parser/rcasmSymbolScope",["require","exports","./rcasmNodes"],e)}((function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=e("./rcasmNodes"),r=function(){function e(e,t){this.symbols=[]}return e.prototype.addSymbol=function(e){this.symbols.push(e)},e.prototype.getSymbol=function(e,t){for(var n=0;n<this.symbols.length;n++){var r=this.symbols[n];if(r.name===e&&r.type===t)return r}return null},e}();t.Scope=r;var i=function(e){function t(){return e.call(this,0,Number.MAX_VALUE)||this}return __extends(t,e),t}(r);t.GlobalScope=i;var o=function(e,t,n,r){this.name=e,this.value=t,this.node=n,this.type=r};t.Symbol=o;var s=function(){function e(e){this.scope=e}return e.prototype.addSymbol=function(e,t,n,r){-1!==e.offset&&this.scope.addSymbol(new o(t,n,e,r))},e.prototype.visitNode=function(e){switch(e.type){case n.NodeType.Label:return this.addSymbol(e,e.getText(),void 0,n.ReferenceType.Label),!0}return!0},e}();t.ScopeBuilder=s;var a=function(){function e(e){this.global=new i,e.acceptVisitor(new s(this.global))}return e.prototype.internalFindSymbol=function(e,t){for(var n=e.getText(),r=this.global,i=0;i<t.length;i++){var o=t[i],s=r.getSymbol(n,o);if(s)return s}return null},e.prototype.evaluateReferenceTypes=function(e){return e instanceof n.LabelRef||e instanceof n.Label?[n.ReferenceType.Label]:null},e.prototype.findSymbolFromNode=function(e){if(!e)return null;var t=this.evaluateReferenceTypes(e);return t?this.internalFindSymbol(e,t):null},e.prototype.matchesSymbol=function(e,t){if(!e)return!1;if(!e.matches(t.name))return!1;var n=this.evaluateReferenceTypes(e);return!(!n||-1===n.indexOf(t.type))&&this.internalFindSymbol(e,n)===t},e}();t.Symbols=a})),function(e){if("object"==typeof module&&"object"==typeof module.exports){var t=e(require,exports);void 0!==t&&(module.exports=t)}else"function"==typeof define&&define.amd&&define("@paul80nd/vscode-rcasm-languageservice/services/rcasmNavigation",["require","exports","../rcasmLanguageTypes","../parser/rcasmNodes","../parser/rcasmSymbolScope"],e)}((function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=e("../rcasmLanguageTypes"),r=e("../parser/rcasmNodes"),i=e("../parser/rcasmSymbolScope"),o=function(){function e(){}return e.prototype.findDefinition=function(e,t,n){var o=new i.Symbols(n),s=e.offsetAt(t),c=r.getNodeAtOffset(n,s);if(!c)return null;var u=o.findSymbolFromNode(c);return u?{uri:e.uri,range:a(u.node,e)}:null},e.prototype.findReferences=function(e,t,n){return this.findDocumentHighlights(e,t,n).map((function(t){return{uri:e.uri,range:t.range}}))},e.prototype.findDocumentHighlights=function(e,t,n){var o=[],c=e.offsetAt(t),u=r.getNodeAtOffset(n,c);if(!u||u.type!==r.NodeType.Label&&u.type!==r.NodeType.LabelRef)return o;var p=new i.Symbols(n),d=p.findSymbolFromNode(u),f=u.getText();return n.accept((function(t){if(d){if(p.matchesSymbol(t,d))return o.push({kind:s(t),range:a(t,e)}),!1}else u&&u.type===t.type&&t.matches(f)&&o.push({kind:s(t),range:a(t,e)});return!0})),o},e.prototype.findDocumentSymbols=function(e,t){var i=[];return t.accept((function(t){var o={name:null,kind:n.SymbolKind.Class,location:null},s=t;return t instanceof r.Label&&(o.name=t.getText(),o.kind=n.SymbolKind.Variable),o.name&&(o.location=n.Location.create(e.uri,a(s,e)),i.push(o)),!0})),i},e}();function s(e){return e instanceof r.Label?n.DocumentHighlightKind.Write:n.DocumentHighlightKind.Read}function a(e,t){return n.Range.create(t.positionAt(e.offset),t.positionAt(e.end))}t.RCASMNavigation=o})),function(e){if("object"==typeof module&&"object"==typeof module.exports){var t=e(require,exports);void 0!==t&&(module.exports=t)}else"function"==typeof define&&define.amd&&define("vscode-languageserver-textdocument/main",["require","exports"],e)}((function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t,n,r){this._uri=e,this._languageId=t,this._version=n,this._content=r,this._lineOffsets=void 0}return Object.defineProperty(e.prototype,"uri",{get:function(){return this._uri},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"languageId",{get:function(){return this._languageId},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"version",{get:function(){return this._version},enumerable:!0,configurable:!0}),e.prototype.getText=function(e){if(e){var t=this.offsetAt(e.start),n=this.offsetAt(e.end);return this._content.substring(t,n)}return this._content},e.prototype.update=function(t,n){for(var o=0,s=t;o<s.length;o++){var a=s[o];if(e.isIncremental(a)){var c=i(a.range),u=this.offsetAt(c.start),p=this.offsetAt(c.end);this._content=this._content.substring(0,u)+a.text+this._content.substring(p,this._content.length);var d=Math.max(c.start.line,0),f=Math.max(c.end.line,0),l=this._lineOffsets,h=r(a.text,!1,u);if(f-d===h.length)for(var m=0,g=h.length;m<g;m++)l[m+d+1]=h[m];else h.length<1e4?l.splice.apply(l,[d+1,f-d].concat(h)):this._lineOffsets=l=l.slice(0,d+1).concat(h,l.slice(f+1));var y=a.text.length-(p-u);if(0!==y)for(m=d+1+h.length,g=l.length;m<g;m++)l[m]=l[m]+y}else{if(!e.isFull(a))throw new Error("Unknown change event received");this._content=a.text,this._lineOffsets=void 0}}this._version=n},e.prototype.getLineOffsets=function(){return void 0===this._lineOffsets&&(this._lineOffsets=r(this._content,!0)),this._lineOffsets},e.prototype.positionAt=function(e){e=Math.max(Math.min(e,this._content.length),0);var t=this.getLineOffsets(),n=0,r=t.length;if(0===r)return{line:0,character:e};for(;n<r;){var i=Math.floor((n+r)/2);t[i]>e?r=i:n=i+1}var o=n-1;return{line:o,character:e-t[o]}},e.prototype.offsetAt=function(e){var t=this.getLineOffsets();if(e.line>=t.length)return this._content.length;if(e.line<0)return 0;var n=t[e.line],r=e.line+1<t.length?t[e.line+1]:this._content.length;return Math.max(Math.min(n+e.character,r),n)},Object.defineProperty(e.prototype,"lineCount",{get:function(){return this.getLineOffsets().length},enumerable:!0,configurable:!0}),e.isIncremental=function(e){var t=e;return null!=t&&"string"==typeof t.text&&void 0!==t.range&&(void 0===t.rangeLength||"number"==typeof t.rangeLength)},e.isFull=function(e){var t=e;return null!=t&&"string"==typeof t.text&&void 0===t.range&&void 0===t.rangeLength},e}();function r(e,t,n){void 0===n&&(n=0);for(var r=t?[n]:[],i=0;i<e.length;i++){var o=e.charCodeAt(i);13!==o&&10!==o||(13===o&&i+1<e.length&&10===e.charCodeAt(i+1)&&i++,r.push(n+i+1))}return r}function i(e){var t=e.start,n=e.end;return t.line>n.line||t.line===n.line&&t.character>n.character?{start:n,end:t}:e}function o(e){var t=i(e.range);return t!==e.range?{newText:e.newText,range:t}:e}!function(e){e.create=function(e,t,r,i){return new n(e,t,r,i)},e.update=function(e,t,r){if(e instanceof n)return e.update(t,r),e;throw new Error("TextDocument.update: document must be created by TextDocument.create")},e.applyEdits=function(e,t){for(var n=e.getText(),r=function e(t,n){if(t.length<=1)return t;var r=t.length/2|0,i=t.slice(0,r),o=t.slice(r);e(i,n),e(o,n);var s=0,a=0,c=0;for(;s<i.length&&a<o.length;){var u=n(i[s],o[a]);t[c++]=u<=0?i[s++]:o[a++]}for(;s<i.length;)t[c++]=i[s++];for(;a<o.length;)t[c++]=o[a++];return t}(t.map(o),(function(e,t){var n=e.range.start.line-t.range.start.line;return 0===n?e.range.start.character-t.range.start.character:n})),i=n.length,s=r.length-1;s>=0;s--){var a=r[s],c=e.offsetAt(a.range.start),u=e.offsetAt(a.range.end);if(!(u<=i))throw new Error("Overlapping edit");n=n.substring(0,c)+a.newText+n.substring(u,n.length),i=c}return n}}(t.TextDocument||(t.TextDocument={}))})),define("vscode-languageserver-textdocument",["vscode-languageserver-textdocument/main"],(function(e){return e})),function(e){if("object"==typeof module&&"object"==typeof module.exports){var t=e(require,exports);void 0!==t&&(module.exports=t)}else"function"==typeof define&&define.amd&&define("@paul80nd/vscode-rcasm-languageservice/rcasmLanguageService",["require","exports","./parser/rcasmParser","./services/rcasmValidation","./services/rcasmCompletion","./services/rcasmHover","./services/rcasmNavigation","./rcasmLanguageTypes","vscode-languageserver-textdocument","vscode-languageserver-types"],e)}((function(e,t){"use strict";function n(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0});var r=e("./parser/rcasmParser"),i=e("./services/rcasmValidation"),o=e("./services/rcasmCompletion"),s=e("./services/rcasmHover"),a=e("./services/rcasmNavigation");n(e("./rcasmLanguageTypes"));var c=e("vscode-languageserver-textdocument");t.TextDocument=c.TextDocument,n(e("vscode-languageserver-types")),t.getLanguageService=function(e){var t=new r.Parser,n=new s.RCASMHover(e&&e.clientCapabilities),c=new o.RCASMCompletion(e&&e.clientCapabilities),u=new a.RCASMNavigation,p=new i.RCASMValidation;return{doValidation:p.doValidation.bind(p),parseProgram:t.parseProgram.bind(t),doComplete:c.doComplete.bind(c),doHover:n.doHover.bind(n),findDefinition:u.findDefinition.bind(u),findReferences:u.findReferences.bind(u),findDocumentHighlights:u.findDocumentHighlights.bind(u),findDocumentSymbols:u.findDocumentSymbols.bind(u)}}})),define("@paul80nd/vscode-rcasm-languageservice",["@paul80nd/vscode-rcasm-languageservice/rcasmLanguageService"],(function(e){return e})),define("vs/language/rcasm/fillers/polyfills",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.polyfill=function(){"function"!=typeof Object.assign&&Object.defineProperty(Object,"assign",{value:function(e,t){if(null!==e)for(var n=1;n<arguments.length;n++){var r=arguments[n];if(r)for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},writable:!0,configurable:!0})}})),define("vs/language/rcasm/rcasmWorker",["require","exports","@paul80nd/vscode-rcasm-languageservice","./fillers/polyfills"],(function(e,t,n,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),r.polyfill();var i=function(){function e(e,t){this._ctx=e,this._languageSettings=t.languageSettings,this._languageId=t.languageId,this._languageService=n.getLanguageService()}return e.prototype.doValidation=function(e){var t=this._getTextDocument(e);if(t){var n=this._languageService.parseProgram(t),r=this._languageService.doValidation(t,n);return Promise.resolve(r)}return Promise.resolve([])},e.prototype.doComplete=function(e,t){var n=this._getTextDocument(e),r=this._languageService.parseProgram(n);return Promise.resolve(this._languageService.doComplete(n,t,r))},e.prototype.doHover=function(e,t){var n=this._getTextDocument(e),r=this._languageService.parseProgram(n),i=this._languageService.doHover(n,t,r);return Promise.resolve(i)},e.prototype.findDefinition=function(e,t){var n=this._getTextDocument(e),r=this._languageService.parseProgram(n),i=this._languageService.findDefinition(n,t,r);return Promise.resolve(i)},e.prototype.findReferences=function(e,t){var n=this._getTextDocument(e),r=this._languageService.parseProgram(n),i=this._languageService.findReferences(n,t,r);return Promise.resolve(i)},e.prototype.findDocumentHighlights=function(e,t){var n=this._getTextDocument(e),r=this._languageService.parseProgram(n),i=this._languageService.findDocumentHighlights(n,t,r);return Promise.resolve(i)},e.prototype.findDocumentSymbols=function(e){var t=this._getTextDocument(e),n=this._languageService.parseProgram(t),r=this._languageService.findDocumentSymbols(t,n);return Promise.resolve(r)},e.prototype._getTextDocument=function(e){for(var t=0,r=this._ctx.getMirrorModels();t<r.length;t++){var i=r[t];if(i.uri.toString()===e)return n.TextDocument.create(e,this._languageId,i.version,i.getValue())}return null},e}();t.RCASMWorker=i,t.create=function(e,t){return new i(e,t)}}));