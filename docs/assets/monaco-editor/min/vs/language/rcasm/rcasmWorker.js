"use strict";/*!-----------------------------------------------------------------------------
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Version: 0.34.0(aac7bf1a0f7f7395ba45df3f6cfaa7baeb48e4ef)
 * Released under the MIT license
 * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt
 *-----------------------------------------------------------------------------*/
define("vs/language/rcasm/rcasmWorker", ["require","require"],(require)=>{
var moduleExports=(()=>{var At=Object.defineProperty;var js=Object.getOwnPropertyDescriptor;var Ts=Object.getOwnPropertyNames;var Bs=Object.prototype.hasOwnProperty;var Us=(t,r)=>()=>(t&&(r=t(t=0)),r);var hr=(t,r)=>()=>(r||t((r={exports:{}}).exports,r),r.exports),gr=(t,r)=>{for(var e in r)At(t,e,{get:r[e],enumerable:!0})},Ws=(t,r,e,i)=>{if(r&&typeof r=="object"||typeof r=="function")for(let n of Ts(r))!Bs.call(t,n)&&n!==e&&At(t,n,{get:()=>r[n],enumerable:!(i=js(r,n))||i.enumerable});return t};var vr=t=>Ws(At({},"__esModule",{value:!0}),t);var St={};gr(St,{DataSize:()=>Me,mkAsmLine:()=>qs,mkData:()=>Js,mkInsn:()=>Xs,mkLabel:()=>Hs,mkLiteral:()=>Zs,mkProgram:()=>Vs,mkRegister:()=>Qs,mkScopeQualifiedIdent:()=>Ys,mkSetPC:()=>Gs});function Vs(t,r){return{lines:t,loc:r}}function qs(t,r,e){return{label:t,stmt:r,loc:e}}function Hs(t,r){return{name:t,loc:r}}function Gs(t,r){return{type:"setpc",pc:t,loc:r}}function Xs(t,r,e,i){return{type:"insn",mnemonic:t,p1:r,p2:e,loc:i}}function Js(t,r,e){return{type:"data",values:r,dataSize:t,loc:e}}function Zs(t,r,e){return{type:"literal",lit:t,ot:r,loc:e}}function Qs(t,r){return{type:"register",value:t,loc:r}}function Ys(t,r,e){return{type:"qualified-ident",path:t,absolute:r,loc:e}}var Me,Lt=Us(()=>{(function(t){t[t.Byte=0]="Byte",t[t.Word=1]="Word"})(Me||(Me={}))});var Sr=hr((Oa,Cr)=>{"use strict";function Ks(t){return t==null?!1:t[Symbol.iterator]!==void 0}function L(t){if(this.words=[],Ks(t))for(var r of t)this.add(r)}L.prototype.add=function(t){this.resize(t),this.words[t>>>5]|=1<<t};L.prototype.flip=function(t){this.resize(t),this.words[t>>>5]^=1<<t};L.prototype.clear=function(){this.words=[]};L.prototype.remove=function(t){this.resize(t),this.words[t>>>5]&=~(1<<t)};L.prototype.isEmpty=function(t){for(var r=this.words.length,e=0;e<r;e++)if(this.words[e]!==0)return!1;return!0};L.prototype.has=function(t){return(this.words[t>>>5]&1<<t)!==0};L.prototype.checkedAdd=function(t){this.resize(t);var r=this.words[t>>>5],e=r|1<<t;return this.words[t>>>5]=e,(e^r)>>>t};L.prototype.trim=function(t){for(var r=this.words.length;r>0&&this.words[r-1]===0;)r--;this.words=this.words.slice(0,r)};L.prototype.resize=function(t){for(var r=t+32>>>5,e=this.words.length;e<r;e++)this.words[e]=0};L.prototype.hammingWeight=function(t){return t-=t>>>1&1431655765,t=(t&858993459)+(t>>>2&858993459),(t+(t>>>4)&252645135)*16843009>>>24};L.prototype.hammingWeight4=function(t,r,e,i){return t-=t>>>1&1431655765,r-=r>>>1&1431655765,e-=e>>>1&1431655765,i-=i>>>1&1431655765,t=(t&858993459)+(t>>>2&858993459),r=(r&858993459)+(r>>>2&858993459),e=(e&858993459)+(e>>>2&858993459),i=(i&858993459)+(i>>>2&858993459),t=t+(t>>>4)&252645135,r=r+(r>>>4)&252645135,e=e+(e>>>4)&252645135,i=i+(i>>>4)&252645135,(t+r+e+i)*16843009>>>24};L.prototype.size=function(){for(var t=0,r=this.words.length,e=this.words,i=0;i<r;i++)t+=this.hammingWeight(e[i]);return t};L.prototype.array=function(){for(var t=new Array(this.size()),r=0,e=this.words.length,i=0;i<e;++i)for(var n=this.words[i];n!=0;){var a=n&-n;t[r++]=(i<<5)+this.hammingWeight(a-1|0),n^=a}return t};L.prototype.forEach=function(t){for(var r=this.words.length,e=0;e<r;++e)for(var i=this.words[e];i!=0;){var n=i&-i;t((e<<5)+this.hammingWeight(n-1|0)),i^=n}};L.prototype.clone=function(){var t=Object.create(L.prototype);return t.words=this.words.slice(),t};L.prototype.intersects=function(t){for(var r=Math.min(this.words.length,t.words.length),e=0;e<r;++e)if((this.words[e]&t.words[e])!==0)return!0;return!1};L.prototype.intersection=function(t){for(var r=Math.min(this.words.length,t.words.length),e=0;e+7<r;e+=8)this.words[e]&=t.words[e],this.words[e+1]&=t.words[e+1],this.words[e+2]&=t.words[e+2],this.words[e+3]&=t.words[e+3],this.words[e+4]&=t.words[e+4],this.words[e+5]&=t.words[e+5],this.words[e+6]&=t.words[e+6],this.words[e+7]&=t.words[e+7];for(;e<r;++e)this.words[e]&=t.words[e];for(var i=this.words.length,e=r;e<i;++e)this.words[e]=0;return this};L.prototype.intersection_size=function(t){for(var r=Math.min(this.words.length,t.words.length),e=0,i=0;i<r;++i)e+=this.hammingWeight(this.words[i]&t.words[i]);return e};L.prototype.new_intersection=function(t){var r=Object.create(L.prototype),e=Math.min(this.words.length,t.words.length);r.words=new Array(e);for(var i=e,n=0;n+7<i;n+=8)r.words[n]=this.words[n]&t.words[n],r.words[n+1]=this.words[n+1]&t.words[n+1],r.words[n+2]=this.words[n+2]&t.words[n+2],r.words[n+3]=this.words[n+3]&t.words[n+3],r.words[n+4]=this.words[n+4]&t.words[n+4],r.words[n+5]=this.words[n+5]&t.words[n+5],r.words[n+6]=this.words[n+6]&t.words[n+6],r.words[n+7]=this.words[n+7]&t.words[n+7];for(;n<i;++n)r.words[n]=this.words[n]&t.words[n];return r};L.prototype.equals=function(t){for(var r=Math.min(this.words.length,t.words.length),e=0;e<r;++e)if(this.words[e]!=t.words[e])return!1;if(this.words.length<t.words.length){for(var i=t.words.length,e=this.words.length;e<i;++e)if(t.words[e]!=0)return!1}else if(t.words.length<this.words.length){for(var i=this.words.length,e=t.words.length;e<i;++e)if(this.words[e]!=0)return!1}return!0};L.prototype.difference=function(t){for(var r=Math.min(this.words.length,t.words.length),e=0;e+7<r;e+=8)this.words[e]&=~t.words[e],this.words[e+1]&=~t.words[e+1],this.words[e+2]&=~t.words[e+2],this.words[e+3]&=~t.words[e+3],this.words[e+4]&=~t.words[e+4],this.words[e+5]&=~t.words[e+5],this.words[e+6]&=~t.words[e+6],this.words[e+7]&=~t.words[e+7];for(;e<r;++e)this.words[e]&=~t.words[e];return this};L.prototype.difference_size=function(t){for(var r=Math.min(this.words.length,t.words.length),e=0,i=0;i<r;++i)e+=this.hammingWeight(this.words[i]&~t.words[i]);for(var n=this.words.length;i<n;++i)e+=this.hammingWeight(this.words[i]);return e};L.prototype.toString=function(){return"{"+this.array().join(",")+"}"};L.prototype.union=function(t){for(var r=Math.min(this.words.length,t.words.length),e=0;e+7<r;e+=8)this.words[e]|=t.words[e],this.words[e+1]|=t.words[e+1],this.words[e+2]|=t.words[e+2],this.words[e+3]|=t.words[e+3],this.words[e+4]|=t.words[e+4],this.words[e+5]|=t.words[e+5],this.words[e+6]|=t.words[e+6],this.words[e+7]|=t.words[e+7];for(;e<r;++e)this.words[e]|=t.words[e];if(this.words.length<t.words.length){this.resize((t.words.length<<5)-1);for(var i=t.words.length,e=r;e<i;++e)this.words[e]=t.words[e]}return this};L.prototype.new_union=function(t){var r=Object.create(L.prototype),e=Math.max(this.words.length,t.words.length);r.words=new Array(e);for(var i=Math.min(this.words.length,t.words.length),n=0;n+7<i;n+=8)r.words[n]=this.words[n]|t.words[n],r.words[n+1]=this.words[n+1]|t.words[n+1],r.words[n+2]=this.words[n+2]|t.words[n+2],r.words[n+3]=this.words[n+3]|t.words[n+3],r.words[n+4]=this.words[n+4]|t.words[n+4],r.words[n+5]=this.words[n+5]|t.words[n+5],r.words[n+6]=this.words[n+6]|t.words[n+6],r.words[n+7]=this.words[n+7]|t.words[n+7];for(;n<i;++n)r.words[n]=this.words[n]|t.words[n];for(var a=this.words.length,n=i;n<a;++n)r.words[n]=this.words[n];for(var u=t.words.length,n=i;n<u;++n)r.words[n]=t.words[n];return r};L.prototype.new_difference=function(t){return this.clone().difference(t)};L.prototype.union_size=function(t){for(var r=Math.min(this.words.length,t.words.length),e=0,i=0;i<r;++i)e+=this.hammingWeight(this.words[i]|t.words[i]);if(this.words.length<t.words.length)for(var n=t.words.length,i=this.words.length;i<n;++i)e+=this.hammingWeight(t.words[i]|0);else for(var n=this.words.length,i=t.words.length;i<n;++i)e+=this.hammingWeight(this.words[i]|0);return e};Cr.exports=L});var $r=hr((Fa,Lr)=>{"use strict";function ta(t,r){function e(){this.constructor=t}e.prototype=r.prototype,t.prototype=new e}function de(t,r,e,i){this.message=t,this.expected=r,this.found=e,this.location=i,this.name="SyntaxError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,de)}ta(de,Error);de.buildMessage=function(t,r){var e={literal:function(h){return'"'+n(h.text)+'"'},class:function(h){var y="",w;for(w=0;w<h.parts.length;w++)y+=h.parts[w]instanceof Array?a(h.parts[w][0])+"-"+a(h.parts[w][1]):a(h.parts[w]);return"["+(h.inverted?"^":"")+y+"]"},any:function(h){return"any character"},end:function(h){return"end of input"},other:function(h){return h.description}};function i(h){return h.charCodeAt(0).toString(16).toUpperCase()}function n(h){return h.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(y){return"\\x0"+i(y)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(y){return"\\x"+i(y)})}function a(h){return h.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(y){return"\\x0"+i(y)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(y){return"\\x"+i(y)})}function u(h){return e[h.type](h)}function p(h){var y=new Array(h.length),w,C;for(w=0;w<h.length;w++)y[w]=u(h[w]);if(y.sort(),y.length>0){for(w=1,C=1;w<y.length;w++)y[w-1]!==y[w]&&(y[C]=y[w],C++);y.length=C}switch(y.length){case 1:return y[0];case 2:return y[0]+" or "+y[1];default:return y.slice(0,-1).join(", ")+", or "+y[y.length-1]}}function m(h){return h?'"'+n(h)+'"':"end of input"}return"Expected "+p(t)+" but "+m(r)+" found."};function ra(t,r){r=r!==void 0?r:{};var e={},i={Lines:rr},n=rr,a=function(s,c){return k.mkProgram(Xe(s,c,1),D())},u=function(s){return s},p=function(s,c){return k.mkAsmLine(s,c,D())},m=function(s){return k.mkAsmLine(s,null,D())},h=function(s){return k.mkAsmLine(null,s,D())},y=function(s){return k.mkAsmLine(null,s,D())},w=function(){return k.mkAsmLine(null,null,D())},C=function(s){return s},x=function(s){return s},P=H("directive"),M=function(s,c){let l=s=="byte"?k.DataSize.Byte:k.DataSize.Word;return k.mkData(l,c,D())},ee=function(s,c){return Xe(s,c,3)},ce=function(s,c,l){return k.mkInsn(s,c,l,D())},V=function(s,c){return k.mkInsn(s,c,null,D())},W=function(s){return k.mkInsn(s,null,null,D())},ue=/^[a-zA-Z_]/,_e=ne([["a","z"],["A","Z"],"_"],!1,!1),le=/^[a-zA-Z_0-9]/,q=ne([["a","z"],["A","Z"],"_",["0","9"]],!1,!1),T=/^[0-9a-f]/i,te=ne([["0","9"],["a","f"]],!1,!0),ie=/^[0-1]/,re=ne([["0","1"]],!1,!1),Pe=/^[+\-]/,fe=ne(["+","-"],!1,!1),ke=/^[0-9]/,B=ne([["0","9"]],!1,!1),O=/^[a-z]/i,se=ne([["a","z"]],!1,!0),ze=/^[0-9a-z_]/i,Ve=ne([["0","9"],["a","z"],"_"],!1,!0),Rn="a",Fn=_("a",!0),jn="b",Tn=_("b",!0),Bn="c",Un=_("c",!0),Wn="d",Nn=_("d",!0),zn="g",Vn=_("g",!0),qn="h",Hn=_("h",!0),Gn="j",Xn=_("j",!0),Jn="m",Zn=_("m",!0),Qn="o",Yn=_("o",!0),Kn="r",ei=_("r",!0),ti="x",ri=_("x",!0),ni="y",ii=_("y",!0),si="0",ai=_("0",!1),oi="1",ci=_("1",!1),ui="2",li=_("2",!1),fi=",",di=_(",",!1),pi=":",hi=_(":",!1),gi=";",vi=_(";",!1),mi="dfb",yi=_("dfb",!0),wi=function(){return"byte"},bi="dfw",xi=_("dfw",!0),Ai=function(){return"word"},Ci=function(s){return parseInt(s,2)},Si=function(s){return parseInt(s,16)},Li=function(s){return parseInt(s)},ft='"',dt=_('"',!1),$i=function(s){return s.join("")},pt=os(),Ei=function(s){return s},Yt=function(){return ss()},Kt=H("whitespace"),_i="	",Pi=_("	",!1),ki="\v",Di=_("\v",!1),Ii="\f",Mi=_("\f",!1),Oi=" ",Ri=_(" ",!1),Fi="\xA0",ji=_("\xA0",!1),Ti="\uFEFF",Bi=_("\uFEFF",!1),Ui=H("end of line"),Wi=/^[\n\r]/,Ni=ne([`
`,"\r"],!1,!1),zi=H("comment"),Vi=H("label"),qi=function(s){return k.mkLabel(s,D())},Hi=H("ORG"),Gi=function(s){return k.mkSetPC(s,D())},Xi=H("mnemonic"),Ji=H("literal"),Zi=function(s){return k.mkLiteral(s,"b",D())},Qi=function(s){return k.mkLiteral(s,"h",D())},Yi=function(s){return k.mkLiteral(s,"d",D())},Ki=function(s){return k.mkLiteral(s,"s",D())},es=H("identifier"),J="::",De=_("::",!1),ts=function(s,c){return k.mkScopeQualifiedIdent(Xe(s,c,1),!1,D())},rs=function(s,c){return k.mkScopeQualifiedIdent(Xe(s,c,1),!0,D())},ns=H("register"),is=function(s){return k.mkRegister(s.toLowerCase(),D())},o=0,S=0,qe=[{line:1,column:1}],Z=0,ht=[],v=0,He;if("startRule"in r){if(!(r.startRule in i))throw new Error(`Can't start parsing from rule "`+r.startRule+'".');n=i[r.startRule]}function ss(){return t.substring(S,o)}function as(){return Ie(S,o)}function Ea(s,c){throw c=c!==void 0?c:Ie(S,o),tr([H(s)],t.substring(S,o),c)}function _a(s,c){throw c=c!==void 0?c:Ie(S,o),us(s,c)}function _(s,c){return{type:"literal",text:s,ignoreCase:c}}function ne(s,c,l){return{type:"class",parts:s,inverted:c,ignoreCase:l}}function os(){return{type:"any"}}function cs(){return{type:"end"}}function H(s){return{type:"other",description:s}}function er(s){var c=qe[s],l;if(c)return c;for(l=s-1;!qe[l];)l--;for(c=qe[l],c={line:c.line,column:c.column};l<s;)t.charCodeAt(l)===10?(c.line++,c.column=1):c.column++,l++;return qe[s]=c,c}function Ie(s,c){var l=er(s),f=er(c);return{start:{offset:s,line:l.line,column:l.column},end:{offset:c,line:f.line,column:f.column}}}function b(s){o<Z||(o>Z&&(Z=o,ht=[]),ht.push(s))}function us(s,c){return new de(s,null,null,c)}function tr(s,c,l){return new de(de.buildMessage(s,c),s,c,l)}function rr(){var s,c,l,f,g,A;if(s=o,c=gt(),c!==e){for(l=[],f=o,g=Ge(),g!==e?(A=gt(),A!==e?(g=[g,A],f=g):(o=f,f=e)):(o=f,f=e);f!==e;)l.push(f),f=o,g=Ge(),g!==e?(A=gt(),A!==e?(g=[g,A],f=g):(o=f,f=e)):(o=f,f=e);l!==e?(S=s,c=a(c,l),s=c):(o=s,s=e)}else o=s,s=e;return s}function gt(){var s,c,l,f,g;return s=o,c=U(),c!==e?(l=ls(),l!==e?(f=U(),f!==e?(g=Is(),g===e&&(g=null),g!==e?(S=s,c=u(l),s=c):(o=s,s=e)):(o=s,s=e)):(o=s,s=e)):(o=s,s=e),s}function ls(){var s,c,l,f;return s=o,c=dr(),c!==e?(l=U(),l!==e?(f=nr(),f!==e?(S=s,c=p(c,f),s=c):(o=s,s=e)):(o=s,s=e)):(o=s,s=e),s===e&&(s=o,c=dr(),c!==e&&(S=s,c=m(c)),s=c,s===e&&(s=o,c=Ms(),c!==e&&(S=s,c=h(c)),s=c,s===e&&(s=o,c=nr(),c!==e&&(S=s,c=y(c)),s=c,s===e&&(s=o,c=U(),c!==e&&(S=s,c=w()),s=c)))),s}function nr(){var s,c;return s=o,c=fs(),c!==e&&(S=s,c=C(c)),s=c,s===e&&(s=o,c=ps(),c!==e&&(S=s,c=x(c)),s=c),s}function fs(){var s,c,l,f;return v++,s=o,c=$s(),c===e&&(c=Es()),c!==e?(l=U(),l!==e?(f=ds(),f!==e?(S=s,c=M(c,f),s=c):(o=s,s=e)):(o=s,s=e)):(o=s,s=e),v--,s===e&&(c=e,v===0&&b(P)),s}function ds(){var s,c,l,f,g,A,R,Q;if(s=o,c=ve(),c!==e){for(l=[],f=o,g=U(),g!==e?(A=bt(),A!==e?(R=U(),R!==e?(Q=ve(),Q!==e?(g=[g,A,R,Q],f=g):(o=f,f=e)):(o=f,f=e)):(o=f,f=e)):(o=f,f=e);f!==e;)l.push(f),f=o,g=U(),g!==e?(A=bt(),A!==e?(R=U(),R!==e?(Q=ve(),Q!==e?(g=[g,A,R,Q],f=g):(o=f,f=e)):(o=f,f=e)):(o=f,f=e)):(o=f,f=e);l!==e?(S=s,c=ee(c,l),s=c):(o=s,s=e)}else o=s,s=e;return s}function ps(){var s,c,l,f,g,A,R,Q;return s=o,c=xt(),c!==e?(l=U(),l!==e?(f=ve(),f!==e?(g=U(),g!==e?(A=bt(),A!==e?(R=U(),R!==e?(Q=ve(),Q!==e?(S=s,c=ce(c,f,Q),s=c):(o=s,s=e)):(o=s,s=e)):(o=s,s=e)):(o=s,s=e)):(o=s,s=e)):(o=s,s=e)):(o=s,s=e),s===e&&(s=o,c=xt(),c!==e?(l=U(),l!==e?(f=ve(),f!==e?(S=s,c=V(c,f),s=c):(o=s,s=e)):(o=s,s=e)):(o=s,s=e),s===e&&(s=o,c=xt(),c!==e&&(S=s,c=W(c)),s=c)),s}function ve(){var s;return s=pr(),s===e&&(s=Rs(),s===e&&(s=Os())),s}function vt(){var s;return ue.test(t.charAt(o))?(s=t.charAt(o),o++):(s=e,v===0&&b(_e)),s}function ir(){var s;return le.test(t.charAt(o))?(s=t.charAt(o),o++):(s=e,v===0&&b(q)),s}function hs(){var s,c;if(s=[],T.test(t.charAt(o))?(c=t.charAt(o),o++):(c=e,v===0&&b(te)),c!==e)for(;c!==e;)s.push(c),T.test(t.charAt(o))?(c=t.charAt(o),o++):(c=e,v===0&&b(te));else s=e;return s}function gs(){var s,c;if(s=[],ie.test(t.charAt(o))?(c=t.charAt(o),o++):(c=e,v===0&&b(re)),c!==e)for(;c!==e;)s.push(c),ie.test(t.charAt(o))?(c=t.charAt(o),o++):(c=e,v===0&&b(re));else s=e;return s}function vs(){var s,c,l,f;if(s=o,Pe.test(t.charAt(o))?(c=t.charAt(o),o++):(c=e,v===0&&b(fe)),c===e&&(c=null),c!==e){if(l=[],ke.test(t.charAt(o))?(f=t.charAt(o),o++):(f=e,v===0&&b(B)),f!==e)for(;f!==e;)l.push(f),ke.test(t.charAt(o))?(f=t.charAt(o),o++):(f=e,v===0&&b(B));else l=e;l!==e?(c=[c,l],s=c):(o=s,s=e)}else o=s,s=e;return s}function ms(){var s,c,l,f;if(s=o,c=[],O.test(t.charAt(o))?(l=t.charAt(o),o++):(l=e,v===0&&b(se)),l!==e)for(;l!==e;)c.push(l),O.test(t.charAt(o))?(l=t.charAt(o),o++):(l=e,v===0&&b(se));else c=e;if(c!==e){for(l=[],ze.test(t.charAt(o))?(f=t.charAt(o),o++):(f=e,v===0&&b(Ve));f!==e;)l.push(f),ze.test(t.charAt(o))?(f=t.charAt(o),o++):(f=e,v===0&&b(Ve));l!==e?(c=[c,l],s=c):(o=s,s=e)}else o=s,s=e;return s}function ys(){var s;return t.substr(o,1).toLowerCase()===Rn?(s=t.charAt(o),o++):(s=e,v===0&&b(Fn)),s}function sr(){var s;return t.substr(o,1).toLowerCase()===jn?(s=t.charAt(o),o++):(s=e,v===0&&b(Tn)),s}function ws(){var s;return t.substr(o,1).toLowerCase()===Bn?(s=t.charAt(o),o++):(s=e,v===0&&b(Un)),s}function ar(){var s;return t.substr(o,1).toLowerCase()===Wn?(s=t.charAt(o),o++):(s=e,v===0&&b(Nn)),s}function bs(){var s;return t.substr(o,1).toLowerCase()===zn?(s=t.charAt(o),o++):(s=e,v===0&&b(Vn)),s}function Pa(){var s;return t.substr(o,1).toLowerCase()===qn?(s=t.charAt(o),o++):(s=e,v===0&&b(Hn)),s}function mt(){var s;return t.substr(o,1).toLowerCase()===Gn?(s=t.charAt(o),o++):(s=e,v===0&&b(Xn)),s}function yt(){var s;return t.substr(o,1).toLowerCase()===Jn?(s=t.charAt(o),o++):(s=e,v===0&&b(Zn)),s}function xs(){var s;return t.substr(o,1).toLowerCase()===Qn?(s=t.charAt(o),o++):(s=e,v===0&&b(Yn)),s}function As(){var s;return t.substr(o,1).toLowerCase()===Kn?(s=t.charAt(o),o++):(s=e,v===0&&b(ei)),s}function wt(){var s;return t.substr(o,1).toLowerCase()===ti?(s=t.charAt(o),o++):(s=e,v===0&&b(ri)),s}function or(){var s;return t.substr(o,1).toLowerCase()===ni?(s=t.charAt(o),o++):(s=e,v===0&&b(ii)),s}function Cs(){var s;return t.charCodeAt(o)===48?(s=si,o++):(s=e,v===0&&b(ai)),s}function cr(){var s;return t.charCodeAt(o)===49?(s=oi,o++):(s=e,v===0&&b(ci)),s}function ur(){var s;return t.charCodeAt(o)===50?(s=ui,o++):(s=e,v===0&&b(li)),s}function bt(){var s;return t.charCodeAt(o)===44?(s=fi,o++):(s=e,v===0&&b(di)),s}function Ss(){var s;return t.charCodeAt(o)===58?(s=pi,o++):(s=e,v===0&&b(hi)),s}function Ls(){var s;return t.charCodeAt(o)===59?(s=gi,o++):(s=e,v===0&&b(vi)),s}function $s(){var s,c;return s=o,t.substr(o,3).toLowerCase()===mi?(c=t.substr(o,3),o+=3):(c=e,v===0&&b(yi)),c!==e&&(S=s,c=wi()),s=c,s}function Es(){var s,c;return s=o,t.substr(o,3).toLowerCase()===bi?(c=t.substr(o,3),o+=3):(c=e,v===0&&b(xi)),c!==e&&(S=s,c=Ai()),s=c,s}function _s(){var s,c,l;return s=o,c=o,l=gs(),l!==e?c=t.substring(c,o):c=l,c!==e?(l=sr(),l!==e?(S=s,c=Ci(c),s=c):(o=s,s=e)):(o=s,s=e),s}function Ps(){var s,c,l,f,g;return s=o,c=Cs(),c!==e?(l=wt(),l!==e?(f=o,g=hs(),g!==e?f=t.substring(f,o):f=g,f!==e?(S=s,c=Si(f),s=c):(o=s,s=e)):(o=s,s=e)):(o=s,s=e),s}function ks(){var s,c,l;return s=o,c=o,l=vs(),l!==e?c=t.substring(c,o):c=l,c!==e?(l=ar(),l===e&&(l=null),l!==e?(S=s,c=Li(c),s=c):(o=s,s=e)):(o=s,s=e),s}function Ds(){var s,c,l,f;if(s=o,t.charCodeAt(o)===34?(c=ft,o++):(c=e,v===0&&b(dt)),c!==e){for(l=[],f=lr();f!==e;)l.push(f),f=lr();l!==e?(t.charCodeAt(o)===34?(f=ft,o++):(f=e,v===0&&b(dt)),f!==e?(S=s,c=$i(l),s=c):(o=s,s=e)):(o=s,s=e)}else o=s,s=e;return s}function lr(){var s,c,l;return s=o,c=o,v++,t.charCodeAt(o)===34?(l=ft,o++):(l=e,v===0&&b(dt)),v--,l===e?c=void 0:(o=c,c=e),c!==e?(t.length>o?(l=t.charAt(o),o++):(l=e,v===0&&b(pt)),l!==e?(S=s,c=Ei(l),s=c):(o=s,s=e)):(o=s,s=e),s}function me(){var s,c,l,f,g;if(s=o,c=o,l=[],f=vt(),f!==e)for(;f!==e;)l.push(f),f=vt();else l=e;if(l!==e){for(f=[],g=ir();g!==e;)f.push(g),g=ir();f!==e?(l=[l,f],c=l):(o=c,c=e)}else o=c,c=e;return c!==e&&(S=s,c=Yt()),s=c,s}function U(){var s,c;for(v++,s=[],c=fr();c!==e;)s.push(c),c=fr();return v--,s===e&&(c=e,v===0&&b(Kt)),s}function fr(){var s,c;return v++,t.charCodeAt(o)===9?(s=_i,o++):(s=e,v===0&&b(Pi)),s===e&&(t.charCodeAt(o)===11?(s=ki,o++):(s=e,v===0&&b(Di)),s===e&&(t.charCodeAt(o)===12?(s=Ii,o++):(s=e,v===0&&b(Mi)),s===e&&(t.charCodeAt(o)===32?(s=Oi,o++):(s=e,v===0&&b(Ri)),s===e&&(t.charCodeAt(o)===160?(s=Fi,o++):(s=e,v===0&&b(ji)),s===e&&(t.charCodeAt(o)===65279?(s=Ti,o++):(s=e,v===0&&b(Bi))))))),v--,s===e&&(c=e,v===0&&b(Kt)),s}function Ge(){var s,c;return v++,Wi.test(t.charAt(o))?(s=t.charAt(o),o++):(s=e,v===0&&b(Ni)),v--,s===e&&(c=e,v===0&&b(Ui)),s}function Is(){var s,c,l,f,g,A;if(v++,s=o,c=Ls(),c!==e){for(l=[],f=o,g=o,v++,A=Ge(),v--,A===e?g=void 0:(o=g,g=e),g!==e?(t.length>o?(A=t.charAt(o),o++):(A=e,v===0&&b(pt)),A!==e?(g=[g,A],f=g):(o=f,f=e)):(o=f,f=e);f!==e;)l.push(f),f=o,g=o,v++,A=Ge(),v--,A===e?g=void 0:(o=g,g=e),g!==e?(t.length>o?(A=t.charAt(o),o++):(A=e,v===0&&b(pt)),A!==e?(g=[g,A],f=g):(o=f,f=e)):(o=f,f=e);l!==e?(c=[c,l],s=c):(o=s,s=e)}else o=s,s=e;return v--,s===e&&(c=e,v===0&&b(zi)),s}function dr(){var s,c,l;return v++,s=o,c=o,l=ms(),l!==e?c=t.substring(c,o):c=l,c!==e?(l=Ss(),l!==e?(S=s,c=qi(c),s=c):(o=s,s=e)):(o=s,s=e),v--,s===e&&(c=e,v===0&&b(Vi)),s}function Ms(){var s,c,l,f,g,A;return v++,s=o,c=xs(),c!==e?(l=As(),l!==e?(f=bs(),f!==e?(g=U(),g!==e?(A=pr(),A!==e?(S=s,c=Gi(A),s=c):(o=s,s=e)):(o=s,s=e)):(o=s,s=e)):(o=s,s=e)):(o=s,s=e),v--,s===e&&(c=e,v===0&&b(Hi)),s}function xt(){var s,c,l;if(v++,s=o,c=[],O.test(t.charAt(o))?(l=t.charAt(o),o++):(l=e,v===0&&b(se)),l!==e)for(;l!==e;)c.push(l),O.test(t.charAt(o))?(l=t.charAt(o),o++):(l=e,v===0&&b(se));else c=e;return c!==e&&(S=s,c=Yt()),s=c,v--,s===e&&(c=e,v===0&&b(Xi)),s}function pr(){var s,c;return v++,s=o,c=_s(),c!==e&&(S=s,c=Zi(c)),s=c,s===e&&(s=o,c=Ps(),c!==e&&(S=s,c=Qi(c)),s=c,s===e&&(s=o,c=ks(),c!==e&&(S=s,c=Yi(c)),s=c,s===e&&(s=o,c=Ds(),c!==e&&(S=s,c=Ki(c)),s=c))),v--,s===e&&(c=e,v===0&&b(Ji)),s}function Os(){var s,c,l,f,g,A,R;if(v++,s=o,c=me(),c!==e){for(l=[],f=o,t.substr(o,2)===J?(g=J,o+=2):(g=e,v===0&&b(De)),g!==e?(A=me(),A!==e?(g=[g,A],f=g):(o=f,f=e)):(o=f,f=e);f!==e;)l.push(f),f=o,t.substr(o,2)===J?(g=J,o+=2):(g=e,v===0&&b(De)),g!==e?(A=me(),A!==e?(g=[g,A],f=g):(o=f,f=e)):(o=f,f=e);l!==e?(S=s,c=ts(c,l),s=c):(o=s,s=e)}else o=s,s=e;if(s===e)if(s=o,t.substr(o,2)===J?(c=J,o+=2):(c=e,v===0&&b(De)),c!==e)if(l=me(),l!==e){for(f=[],g=o,t.substr(o,2)===J?(A=J,o+=2):(A=e,v===0&&b(De)),A!==e?(R=me(),R!==e?(A=[A,R],g=A):(o=g,g=e)):(o=g,g=e);g!==e;)f.push(g),g=o,t.substr(o,2)===J?(A=J,o+=2):(A=e,v===0&&b(De)),A!==e?(R=me(),R!==e?(A=[A,R],g=A):(o=g,g=e)):(o=g,g=e);f!==e?(S=s,c=rs(l,f),s=c):(o=s,s=e)}else o=s,s=e;else o=s,s=e;return v--,s===e&&(c=e,v===0&&b(es)),s}function Rs(){var s,c,l,f,g;return v++,s=o,c=o,l=ys(),l===e&&(l=sr(),l===e&&(l=ws(),l===e&&(l=ar(),l===e&&(l=o,f=yt(),f!==e?(g=ur(),g!==e?(f=[f,g],l=f):(o=l,l=e)):(o=l,l=e),l===e&&(l=o,f=yt(),f!==e?(g=cr(),g!==e?(f=[f,g],l=f):(o=l,l=e)):(o=l,l=e),l===e&&(l=yt(),l===e&&(l=o,f=wt(),f!==e?(g=or(),g!==e?(f=[f,g],l=f):(o=l,l=e)):(o=l,l=e),l===e&&(l=wt(),l===e&&(l=or(),l===e&&(l=o,f=mt(),f!==e?(g=cr(),g!==e?(f=[f,g],l=f):(o=l,l=e)):(o=l,l=e),l===e&&(l=o,f=mt(),f!==e?(g=ur(),g!==e?(f=[f,g],l=f):(o=l,l=e)):(o=l,l=e),l===e&&(l=mt())))))))))))),l!==e?c=t.substring(c,o):c=l,c!==e?(l=o,v++,f=vt(),v--,f===e?l=void 0:(o=l,l=e),l!==e?(S=s,c=is(c),s=c):(o=s,s=e)):(o=s,s=e),v--,s===e&&(c=e,v===0&&b(ns)),s}var k=(Lt(),vr(St));function Fs(s,c){return s.map(function(l){return l[c]})}function Xe(s,c,l){return[s].concat(Fs(c,l))}function D(){return{...as()}}if(He=n(),He!==e&&o===t.length)return He;throw He!==e&&o<t.length&&b(cs()),tr(ht,Z<t.length?t.charAt(Z):null,Z<t.length?Ie(Z,Z+1):Ie(Z,Z))}Lr.exports={SyntaxError:de,parse:ra}});var $a={};gr($a,{RCASMWorker:()=>lt,create:()=>La});var ae={a:0,d:1},Ns={a:0,b:1,m:2,j:3},Ct={a:0,b:1,c:2,d:3,m1:4,m2:5,x:6,y:7},E;(function(t){t[t.AluDst=0]="AluDst",t[t.ClrTgt=1]="ClrTgt",t[t.GtoTgt=2]="GtoTgt",t[t.LitOpc=3]="LitOpc",t[t.MovDstSrc=4]="MovDstSrc",t[t.SetTgtVal=5]="SetTgtVal"})(E||(E={}));var mr={add:{op:129,pf:E.AluDst,p1:{cs:ae,op:function(t){return t<<3}},p2:null},inc:{op:130,pf:E.AluDst,p1:{cs:ae,op:function(t){return t<<3}},p2:null},and:{op:131,pf:E.AluDst,p1:{cs:ae,op:function(t){return t<<3}},p2:null},orr:{op:132,pf:E.AluDst,p1:{cs:ae,op:function(t){return t<<3}},p2:null},eor:{op:133,pf:E.AluDst,p1:{cs:ae,op:function(t){return t<<3}},p2:null},cmp:{op:133,pf:E.AluDst,p1:{cs:ae,op:function(t){return t<<3}},p2:null},not:{op:134,pf:E.AluDst,p1:{cs:ae,op:function(t){return t<<3}},p2:null},rol:{op:135,pf:E.AluDst,p1:{cs:ae,op:function(t){return t<<3}},p2:null},mov:{op:0,pf:E.MovDstSrc,p1:{cs:Ct,op:function(t){return t<<3}},p2:{cs:Ct,op:function(t){return t}}},clr:{op:0,pf:E.ClrTgt,p1:{cs:Ct,op:function(t){return t<<3|t}},p2:null},ldi:{op:0,pf:E.SetTgtVal,p1:{cs:Ns,op:function(t){return((t&2)===2?192:64)|t<<5}},p2:{cs:null,op:function(t){return t}}},jmp:{op:230,pf:E.GtoTgt,p1:null,p2:null},jsr:{op:231,pf:E.GtoTgt,p1:null,p2:null},bne:{op:226,pf:E.GtoTgt,p1:null,p2:null},beq:{op:228,pf:E.GtoTgt,p1:null,p2:null},bcs:{op:232,pf:E.GtoTgt,p1:null,p2:null},bmi:{op:240,pf:E.GtoTgt,p1:null,p2:null},blt:{op:240,pf:E.GtoTgt,p1:null,p2:null},ble:{op:244,pf:E.GtoTgt,p1:null,p2:null},opc:{op:0,pf:E.LitOpc,p1:{cs:null,op:function(t){return t}},p2:null}},yr=[["clr a","mov a,b","mov a,c","mov a,d",null,null,null,null,"mov b,a","clr b","mov b,c","mov b,d",null,null,null,null],["mov c,a","mov c,b","clr c","mov c,d",null,null,null,null,"mov d,a","mov d,b","mov d,c","clr d",null,null,null,null],[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],["ldi a,0","ldi a,1","ldi a,2","ldi a,3","ldi a,4","ldi a,5","ldi a,6","ldi a,7","ldi a,8","ldi a,9","ldi a,10","ldi a,11","ldi a,12","ldi a,13","ldi a,14","ldi a,15"],["ldi a,-16","ldi a,-15","ldi a,-14","ldi a,-13","ldi a,-12","ldi a,-11","ldi a,-10","ldi a,-9","ldi a,-8","ldi a,-7","ldi a,-6","ldi a,-5","ldi a,-4","ldi a,-3","ldi a,-2","ldi a,-1"],["ldi b,0","ldi b,1","ldi b,2","ldi b,3","ldi b,4","ldi b,5","ldi b,6","ldi b,7","ldi b,8","ldi b,9","ldi b,10","ldi b,11","ldi b,12","ldi b,13","ldi b,14","ldi b,15"],["ldi b,-16","ldi b,-15","ldi b,-14","ldi b,-13","ldi b,-12","ldi b,-11","ldi b,-10","ldi b,-9","ldi b,-8","ldi b,-7","ldi b,-6","ldi b,-5","ldi b,-4","ldi b,-3","ldi b,-2","ldi b,-1"],["clr a","add","inc","and","orr","eor","not","rol","clr d","add d","inc d","and d","orr d","eor d","not d","rol d"],[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],["ldi m,",null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],["ldi j,",null,"bne",null,"beq",null,"jmp","jsr","bcs",null,null,null,null,null,null,null],["blt","jlt",null,null,"ble",null,null,null,null,null,null,null,null,null,null,null]],wr=function(t){switch(!0){case(t&192)===0:return{class:"MOV8",cycles:1};case(t&192)===4:return{class:"SETAB",cycles:1};case(t&240)===128:return{class:"ALU",cycles:1};case(t&192)===192:return{class:"GOTO",cycles:3};default:return{class:"MISC",cycles:1}}};function N(t){return t.toString(16).padStart(4,"0")}Lt();var $t=function(t){var r=typeof Symbol=="function"&&Symbol.iterator,e=r&&t[r],i=0;if(e)return e.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")},Je=function(t,r){var e=typeof Symbol=="function"&&t[Symbol.iterator];if(!e)return t;var i=e.call(t),n,a=[],u;try{for(;(r===void 0||r-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(p){u={error:p}}finally{try{n&&!n.done&&(e=i.return)&&e.call(i)}finally{if(u)throw u.error}}return a},Ze=function(){function t(r,e,i,n){this.start=r,this.end=e,this.inferStart=i,this.id=n,this.blocks=[{start:r,binary:[]}],this.curBlock=this.blocks[0]}return t.prototype.setCurrentPC=function(r){var e=void 0;if(this.inferStart&&this.blocks.length===1&&this.blocks[0].binary.length===0)this.start=r;else{var i=this.end!==void 0?"$".concat(N(this.end)):"",n="Segment address range: $".concat(N(this.start),"-").concat(i);r<this.start?e="".concat(n,".  Cannot set program counter to a lower address $").concat(N(r),"."):this.end!==void 0&&r>this.end?e="".concat(n,".  Trying to set program counter to $").concat(N(r)," -- it is past segment end ").concat(i,"."):this.blocks.length===1&&this.blocks[0].binary.length===0&&(this.start=r)}var a={start:r,binary:[]},u=this.blocks.push(a);return this.curBlock=this.blocks[u-1],e},t.prototype.empty=function(){return this.blocks.every(function(r){return r.binary.length===0})},t.prototype.currentPC=function(){return this.curBlock.start+this.curBlock.binary.length},t.prototype.emit=function(r){if(this.currentPC()<this.start||this.end!==void 0&&this.currentPC()>this.end){var e=this.end!==void 0?"$".concat(N(this.end)):"",i=this.start!==void 0?"$".concat(N(this.start)):"";return"Segment overflow at $".concat(N(this.currentPC()),".  Segment address range: ").concat(i,"-").concat(e)}this.curBlock.binary.push(r)},t.prototype.formatRange=function(){var r=this.end!==void 0?"$".concat(N(this.end)):"",e=this.start!==void 0?"$".concat(N(this.start)):"";return"".concat(e,"-").concat(r)},t.prototype.overlaps=function(r){var e=this.start,i=r.start,n=this.end!==void 0?this.end:this.currentPC(),a=r.end!==void 0?r.end:r.currentPC();return e<i?i<=n:a>=e},t}();function br(t){var r,e,i=[];try{for(var n=$t(t),a=n.next();!a.done;a=n.next()){var u=Je(a.value,2),p=u[0],m=u[1],h=m.blocks.filter(function(w){return w.binary.length!==0}).sort(function(w,C){return w.start-C.start});if(h.length!==0){var y=new Ze(m.start,m.end,m.inferStart,i.length-1);y.blocks=h,y.curBlock=h[h.length-1],i.push([p,y])}}}catch(w){r={error:w}}finally{try{a&&!a.done&&(e=n.return)&&e.call(n)}finally{if(r)throw r.error}}return i}function xr(t){var r,e,i,n,a=br(t);if(a.length===0)return{startPC:0,binary:Uint8Array.from([])};for(var u=Je(a[0],2),p=u[0],m=u[1],h=m.blocks[0],y=m.blocks[m.blocks.length-1],w=h.start,C=y.start+y.binary.length,x=1;x<a.length;x++){var P=a[x][1],M=P.blocks[0].start,ee=P.curBlock.start+P.curBlock.binary.length;w=Math.min(M,w),C=Math.max(ee,C)}var ce=new Uint8Array(C);try{for(var V=$t(a),W=V.next();!W.done;W=V.next()){var ue=Je(W.value,2),_e=ue[0],le=ue[1];try{for(var q=(i=void 0,$t(le.blocks)),T=q.next();!T.done;T=q.next())for(var te=T.value,x=0;x<te.binary.length;x++)ce[te.start+x]=te.binary[x]}catch(ie){i={error:ie}}finally{try{T&&!T.done&&(n=q.return)&&n.call(q)}finally{if(i)throw i.error}}}}catch(ie){r={error:ie}}finally{try{W&&!W.done&&(e=V.return)&&e.call(V)}finally{if(r)throw r.error}}return{startPC:w,binary:ce.slice(w)}}function Ar(t){var r=br(t).sort(function(e,i){return e[1].start-i[1].start});return r.map(function(e){var i=Je(e,2),n=i[0],a=i[1],u=a.blocks.map(function(p){return{start:p.start,end:p.start+p.binary.length-1}});return{name:n,blocks:u}})}var Qe=function(){return Qe=Object.assign||function(t){for(var r,e=1,i=arguments.length;e<i;e++){r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Qe.apply(this,arguments)},ea=Sr(),Et=function(){function t(){this.lineStack=[],this.pcToLocs={},this.insnBitset=new ea}return t.prototype.startLine=function(r,e,i){var n={lineNo:r.start.line,segmentId:i.id,numBytes:0};this.lineStack.push({loc:n,pc:e,segmentId:i.id})},t.prototype.endLine=function(r,e){var i=this.lineStack.pop();if(!i)throw new Error("internal compiler error, mismatching start/end lines in debugInfo");var n=r-i.pc;if(n>0&&e.id===i.segmentId){var a=Qe(Qe({},i.loc),{numBytes:n});this.pcToLocs[i.pc]===void 0?this.pcToLocs[i.pc]=[a]:this.pcToLocs[i.pc].push(a)}},t.prototype.markAsInstruction=function(r,e){for(var i=r;i<e;i++)this.insnBitset.add(i)},t.prototype.info=function(){var r=this.insnBitset.clone(),e=function(i){return r.has(i)};return{pcToLocs:this.pcToLocs,isInstruction:e}},t}();var G=function(){return G=Object.assign||function(t){for(var r,e=1,i=arguments.length;e<i;e++){r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},G.apply(this,arguments)},_t=function(t){var r=typeof Symbol=="function"&&Symbol.iterator,e=r&&t[r],i=0;if(e)return e.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")},pe=function(t,r){var e=typeof Symbol=="function"&&t[Symbol.iterator];if(!e)return t;var i=e.call(t),n,a=[],u;try{for(;(r===void 0||r-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(p){u={error:p}}finally{try{n&&!n.done&&(e=i.return)&&e.call(i)}finally{if(u)throw u.error}}return a},ye=function(t,r,e){if(e||arguments.length===2)for(var i=0,n=r.length,a;i<n;i++)(a||!(i in r))&&(a||(a=Array.prototype.slice.call(r,0,i)),a[i]=r[i]);return t.concat(a||Array.prototype.slice.call(r))},Er=$r();function Pt(t){return{value:t,errors:!0,completeFirstPass:!1}}function Dt(t,r){return{value:t,errors:!1,completeFirstPass:r}}function Ye(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return t.some(function(e){return e!==void 0&&e.errors})}var na=function(){function t(r,e){this.syms=new Map,this.parent=null,this.children=new Map,this.parent=r,this.name=e}return t.prototype.findSymbol=function(r){for(var e=this;e!==null;e=e.parent){var i=e.syms.get(r);if(i!==void 0)return i}},t.prototype.findSymbolPath=function(r){if(r.length===1)return this.findSymbol(r[0]);for(var e=this;e.children.get(r[0])===void 0;)if(e=e.parent,e===null)return;for(var i=0;i<r.length-1;i++)if(e=e.children.get(r[i]),e===void 0)return;return e.syms.get(r[r.length-1])},t.prototype.addSymbol=function(r,e,i){this.syms.set(r,G(G({},e),{seen:i}))},t.prototype.updateSymbol=function(r,e,i){for(var n=this;n!==null;n=n.parent){var a=n.syms.get(r);if(a!==void 0){n.syms.set(r,G(G({},e),{seen:i}));return}}},t}(),ia=function(){function t(){this.passCount=0,this.root=new na(null,""),this.curSymtab=this.root,this.anonScopeCount=0}return t.prototype.startPass=function(r){this.curSymtab=this.root,this.anonScopeCount=0,this.passCount=r},t.prototype.findPath=function(r,e){return e?this.root.findSymbolPath(r):this.curSymtab.findSymbolPath(r)},t.prototype.findQualifiedSym=function(r,e){return this.findPath(r,e)},t.prototype.symbolSeen=function(r){var e=this.curSymtab.syms.get(r);return e!==void 0?e.seen===this.passCount:!1},t.prototype.declareLabelSymbol=function(r,e,i){var n=r.name,a=r.loc,u=this.curSymtab.syms.get(n);if(u===void 0){var p={type:"label",segment:i,data:Dt({addr:e,loc:a},!1)};return this.curSymtab.addSymbol(n,p,this.passCount),!1}if(u.type!=="label")throw new Error("ICE: declareLabelSymbol should be called only on labels");var m=u;if(m.data.value.addr!==e){var h={type:"label",segment:i,data:G(G({},u.data),{value:G(G({},u.data.value),{addr:e})})};return this.curSymtab.updateSymbol(n,h,this.passCount),!0}return this.curSymtab.updateSymbol(n,u,this.passCount),!1},t.prototype.dumpLabels=function(r,e){var i,n,a,u,p,m,h={};try{for(var y=_t(e),w=y.next();!w.done;w=y.next()){var C=pe(w.value,2),x=C[0],P=C[1];h[P.id]=x}}catch(B){i={error:B}}finally{try{w&&!w.done&&(n=y.return)&&n.call(y)}finally{if(i)throw i.error}}var M=[],ee=function(B,O){if(B!==void 0){var se=ye(ye([],pe(B),!1),[O.name],!1);M.push({path:se,sym:O})}else M.push({path:[],sym:O})};ee(void 0,this.root);for(var ce=[];M.length>0;){var P=M.pop();try{for(var V=(a=void 0,_t(P.sym.syms)),W=V.next();!W.done;W=V.next()){var ue=pe(W.value,2),_e=ue[0],le=ue[1];le.type==="label"&&ce.push({path:ye(ye([],pe(P.path),!1),[_e],!1),addr:le.data.value.addr,size:0,segmentName:h[le.segment.id]})}}catch(O){a={error:O}}finally{try{W&&!W.done&&(u=V.return)&&u.call(V)}finally{if(a)throw a.error}}try{for(var q=(p=void 0,_t(P.sym.children)),T=q.next();!T.done;T=q.next()){var te=pe(T.value,2),_e=te[0],ie=te[1];ee(P.path,ie)}}catch(O){p={error:O}}finally{try{T&&!T.done&&(m=q.return)&&m.call(q)}finally{if(p)throw p.error}}}var re=ce.sort(function(B,O){return B.addr-O.addr}),Pe=re.length;if(Pe>0){for(var fe=1;fe<Pe;fe++)re[fe-1].size=re[fe].addr-re[fe-1].addr;var ke=re[Pe-1];ke.size=r-ke.addr}return re.map(function(B){var O=B.path,se=B.addr,ze=B.size,Ve=B.segmentName;return{name:O.join("::"),addr:se,size:ze,segmentName:Ve}})},t}();function kt(t){var r=typeof t;return r==="object"&&t instanceof Array?"array":r}function sa(t){return"".concat(t.absolute?"::":"").concat(t.path.join("::"))}var aa=function(){function t(){var r=this;this.curSegmentName="",this.curSegment=new Ze(0,0,!1,0),this.pass=0,this.needPass=!1,this.scopes=new ia,this.segments=[],this.errorList=[],this.warningList=[],this.debugInfo=new Et,this.errors=function(){return r.formatErrors(r.errorList,"error")},this.warnings=function(){return r.formatErrors(r.warningList,"warning")}}return t.prototype.prg=function(){var r=xr(this.segments),e=r.startPC,i=r.binary,n=e&255,a=e>>8&255;return Uint8Array.from(ye([n,a],pe(i),!1))},t.prototype.anyErrors=function(){return this.errorList.length!==0},t.prototype.formatErrors=function(r,e){var i=new Set(r.map(function(n){return JSON.stringify(n)}));return ye([],pe(i),!1).map(function(n){var a=JSON.parse(n),u=a.loc,p=a.msg,m="<unknown>:1:1: ".concat(e,": ").concat(p);return u&&(m="".concat(u.start.line,":").concat(u.start.column,": ").concat(e,": ").concat(p)),{loc:u,msg:p,formatted:m}})},t.prototype.addError=function(r,e){this.errorList.push({msg:r,loc:e})},t.prototype.addWarning=function(r,e){this.warningList.push({msg:r,loc:e})},t.prototype.startPass=function(r){this.pass=r,this.needPass=!1,this.errorList=[],this.scopes.startPass(r),this.debugInfo=new Et,this.segments=[];var e=this.newSegment("default",0,void 0,!0);this.setCurrentSegment({type:"segment",data:e},"default")},t.prototype.setCurrentSegment=function(r,e){this.curSegmentName=e,this.curSegment=r.data},t.prototype.newSegment=function(r,e,i,n){var a=new Ze(e,i,n,this.segments.length-1);return this.segments.push([r,a]),a},t.prototype.getPC=function(){return this.curSegment.currentPC()},t.prototype.evalExprType=function(r,e,i){var n=this.evalExpr(r),a=n.errors,u=n.value,p=n.completeFirstPass;return!a&&typeof u!==e?(this.addError("Expecting ".concat(i," to be '").concat(e,"' type, got '").concat(kt(u),"'"),r.loc),{errors:!0,completeFirstPass:p,value:u}):n},t.prototype.evalExprToInt=function(r,e){return this.evalExprType(r,"number",e)},t.prototype.evalExpr=function(r){switch(r.type){case"literal":return Dt(r.lit,!0);case"register":return this.addError("Unexpected register",r.loc),Pt(0);case"ident":throw new Error("should not see an ident here -- if you do, it is probably a wrong type node in parser");case"qualified-ident":{var e=this.scopes.findQualifiedSym(r.path,r.absolute);if(e===void 0)return this.pass>=1?(this.addError("Undefined symbol '".concat(sa(r),"'"),r.loc),Pt(0)):(this.needPass=!0,Dt(0,!1));switch(e.type){case"label":return{errors:e.data.errors,value:e.data.value.addr,completeFirstPass:e.seen===this.pass}}break}default:break}throw new Error("should be unreachable on ".concat(r))},t.prototype.emit=function(r){var e=this.curSegment.emit(r);e!==void 0&&this.addError(e,this.lineLoc)},t.prototype.emit16=function(r){this.emit(r>>8&255),this.emit(r&255)},t.prototype.assembleAluInstr=function(r,e){e.p2&&this.addWarning("Parameter not required",e.p2.loc);var i=r.op;if(e.p1&&r.p1){var n=this.checkRegister(e.p1,r.p1);if(n===void 0)return;i|=r.p1.op(n)}this.emit(i)},t.prototype.assembleClrInstr=function(r,e){e.p2&&this.addWarning("Parameter not required",e.p2.loc);var i=r.op;if(!e.p1||!r.p1){this.addError("Parameter required",e.loc);return}var n=this.checkRegister(e.p1,r.p1);n!==void 0&&(i|=r.p1.op(n),this.emit(i))},t.prototype.assembleMovInstr=function(r,e){if(!e.p1||!r.p1||!e.p2||!r.p2){this.addError("Two parameters required",e.loc);return}var i=r.op,n=this.checkRegister(e.p1,r.p1);if(n!==void 0){i|=r.p1.op(n);var a=this.checkRegister(e.p2,r.p2);a!==void 0&&(i|=r.p2.op(a),this.emit(i))}},t.prototype.assembleLitOpc=function(r,e){e.p2&&this.addWarning("Parameter not required",e.p2.loc);var i=r.op;if(!e.p1||!r.p1){this.addError("Parameter required",e.loc);return}var n=this.checkLiteral(e.p1,0,255,"h");n!==void 0&&(i|=r.p1.op(n),this.emit(i))},t.prototype.assembleSetInstr=function(r,e){if(!e.p1||!r.p1||!e.p2||!r.p2){this.addError("Two parameters required",e.loc);return}var i=r.op,n=this.checkRegister(e.p1,r.p1);if(n!==void 0){if(i|=r.p1.op(n),n<=16){var a=this.checkLiteral(e.p2,-16,15);if(a===void 0)return;i|=r.p2.op(a)}this.emit(i)}},t.prototype.checkRegister=function(r,e){if(r.type!=="register")this.addError("Register required",r.loc);else{var i=e.cs[r.value];return i===void 0&&this.addError("Invalid register - choose one of [".concat(Object.keys(e.cs).join("|"),"]"),r.loc),i}},t.prototype.checkLiteral=function(r,e,i,n){n===void 0&&(n="d");var a=this.evalExprToInt(r,"value");if(!Ye(a)){var u=a.value;if(u<e||u>i){var p="";switch(n){case"b":var m=i.toString(2),h=("0".repeat(m.length)+e.toString(2)).slice(-m.length);p="".concat(h,"b and ").concat(m,"b");break;case"h":var y=i.toString(16).toUpperCase(),w=("0".repeat(y.length)+e.toString(16).toUpperCase()).slice(-y.length);p="0x".concat(w," and 0x").concat(y);break;default:p="".concat(e," and ").concat(i)}this.addError("Literal out of range (must be between ".concat(p,")"),r.loc)}else return u}},t.prototype.assembleBranch=function(r,e){if(e.p2&&this.addWarning("Parameter not required",e.p2.loc),!e.p1){this.addError("Parameter required",e.loc);return}if(e.p1.type!=="qualified-ident"){this.addError("Identifier required",e.p1.loc);return}var i=this.evalExpr(e.p1);if(!Ye(i)){if(typeof i.value!="number"){this.addError("Expecting branch label to evaluate to integer, got ".concat(kt(i.value)),e.p1.loc);return}var n=i.value;this.emit(r.op),this.emit((n&65280)>>8),this.emit(n&255)}},t.prototype.handleSetPC=function(r){var e=this.evalExprToInt(r,"pc");if(!Ye(e)){var i=e.value,n=e.completeFirstPass;if(!n){this.addError("Value for new program counter must evaluate to a value in the first pass",r.loc);return}!this.curSegment.empty()&&this.curSegment.currentPC()>i&&this.addError("Cannot set program counter to a smaller value than current (current: $".concat(N(this.curSegment.currentPC()),", trying to set $").concat(N(i),")"),r.loc);var a=this.curSegment.setCurrentPC(i);a!==void 0&&this.addError(a,r.loc)}},t.prototype.emit8or16=function(r,e){if(e===8){this.emit(r);return}this.emit16(r)},t.prototype.emitData=function(r,e){for(var i=this,n=Math.pow(2,e),a=0;a<r.length;a++){var u=this.evalExpr(r[a]);if(!Ye(u)){var p=u.value;if(typeof p=="number")p>=n?this.addError("Data out of range for ".concat(e," bits"),r[a].loc):this.emit8or16(p,e);else if(typeof p=="string"){var m=p.split("").map(function(h){return h.charCodeAt(0)});m.find(function(h){return h>=n})?this.addError("Data contains character out of range for ".concat(e," bits"),r[a].loc):m.forEach(function(h){return i.emit8or16(h,e)})}else this.addError("Only literal types can be emitted. Got ".concat(kt(p)),r[a].loc)}}},t.prototype.checkDirectives=function(r,e){switch(r.type){case"data":{this.emitData(r.values,r.dataSize===Me.Byte?8:16);break}case"setpc":{this.handleSetPC(r.pc);break}default:this.addError("unknown directive ".concat(r.type),r.loc);return}},t.prototype.assembleLines=function(r){var e=this;if(!(r===null||r.length===0)&&r.length!==0){for(var i=function(m){for(var h=0;h<m.length;h++)e.debugInfo.startLine(m[h].loc,e.getPC(),e.curSegment),e.assembleLine(m[h]),e.debugInfo.endLine(e.getPC(),e.curSegment)},n=0;n<r.length;){var a=r[n],u=a.label,p=a.stmt;if(u===null&&p===null)n++;else break}if(!(n>=r.length))return i(r)}},t.prototype.checkAndDeclareLabel=function(r){if(this.scopes.symbolSeen(r.name))this.addError("Symbol '".concat(r.name,"' already defined"),r.loc);else{var e=this.scopes.declareLabelSymbol(r,this.getPC(),this.curSegment);e&&(this.needPass=!0)}},t.prototype.assembleLine=function(r){var e=this;if(this.lineLoc=r.loc,!(r.label===null&&r.stmt===null)&&(r.label!==null&&this.checkAndDeclareLabel(r.label),r.stmt!==null)){if(r.stmt.type!=="insn"){this.checkDirectives(r.stmt,r.label===null?null:r.label.name);return}var i=r.stmt,n=mr[i.mnemonic.toLocaleLowerCase()],a=function(u){var p=e.getPC();u();var m=e.getPC();e.debugInfo.markAsInstruction(p,m)};n!==void 0?a(function(){switch(n.pf){case E.AluDst:e.assembleAluInstr(n,i);break;case E.ClrTgt:e.assembleClrInstr(n,i);break;case E.MovDstSrc:e.assembleMovInstr(n,i);break;case E.LitOpc:e.assembleLitOpc(n,i);break;case E.SetTgtVal:e.assembleSetInstr(n,i);break;case E.GtoTgt:e.assembleBranch(n,i);break;default:e.addError("Couldn't encode instruction '".concat(i.mnemonic," '"),r.loc)}}):this.addError("Unknown mnemonic '".concat(i.mnemonic,"'"),i.loc)}},t.prototype.assemble=function(r){try{var e=Er.parse(r.toString());e!==void 0&&e.lines&&this.assembleLines(e.lines)}catch(i){if("name"in i&&i.name==="SyntaxError")this.addError("Syntax error: ".concat(i.message),G({},i.location));else{if("name"in i&&i.name==="semantic")return;throw i}}},t.prototype.dumpLabels=function(){return this.scopes.dumpLabels(this.getPC(),this.segments)},t.prototype.collectSegmentInfo=function(){return Ar(this.segments)},t}();function It(t){try{return Er.parse(t.toString())}catch{return}}function Mt(t){var r=new aa,e=0;do{if(r.startPass(e),r.assemble(t),e>0&&r.anyErrors())return{prg:Uint8Array.from([]),labels:[],segments:[],debugInfo:void 0,errors:r.errors(),warnings:r.warnings()};e+=1}while(r.needPass);return{prg:r.prg(),errors:r.errors(),warnings:r.warnings(),labels:r.dumpLabels(),segments:r.collectSegmentInfo(),debugInfo:r.debugInfo}}function Ke(t){return"".concat(t.toString(16).toUpperCase().padStart(2,"0"))}function _r(t){return"".concat(t.toString(16).toUpperCase().padStart(4,"0"))}function oa(t,r){var e=0,i=t.length,n=[];for(e=0;e<i;e+=r){var a=t.slice(e,e+r);n.push(a)}return n}var Na=function(){function t(r,e){var i=this,n;this.buf=r,this.outputPadChars="     ",this.outputBytesPerLine=1,this.bytes={startPC:0,bytes:[]},this.byte=function(){var a=i.buf[i.curOffs];return i.curOffs++,a},this.print=function(a,u,p,m){i.flushBytes();var h=Ke(u[0]),y=u.length>=2?Ke(u[1]):"  ",w=u.length>=3?Ke(u[2]):"  ",C="".concat(_r(a),": ").concat(h," ").concat(y," ").concat(w).concat(i.outputPadChars).concat(p);i.output.push(C)},this.output=[],this.curAddr=r[0]+(r[1]<<8),this.curOffs=2,this.disasmOptions=e,!((n=this.disasmOptions)===null||n===void 0)&&n.isInstruction&&(this.outputBytesPerLine=4)}return t.prototype.flushBytes=function(){for(var r=oa(this.bytes.bytes,this.outputBytesPerLine),e=this.bytes.startPC,i=0;i<r.length;i++,e+=this.outputBytesPerLine){var n=r[i],a=n.map(function(u){return Ke(u)}).join(" ");this.output.push("".concat(_r(e),": ").concat(a))}this.bytes.bytes=[]},t.prototype.disSingle=function(r,e,i){var n=this.curAddr;this.print(n,[e],r,i.cycles.toString())},t.prototype.disTriple=function(r,e,i){var n=this.curAddr,a=this.byte(),u=this.byte();this.print(n,[e,a,u],r,i.cycles.toString())},t.prototype.disUnknown=function(r){this.bytes.bytes.length!==0?this.bytes.bytes.push(r):(this.bytes.bytes=[r],this.bytes.startPC=this.curAddr)},t.prototype.disassemble=function(){var r=this.buf.byteLength,e=function(p){return!0};this.disasmOptions&&this.disasmOptions.isInstruction&&(e=this.disasmOptions.isInstruction);for(var i=this.curOffs;this.curOffs<r;){this.curAddr+=this.curOffs-i,i=this.curOffs;var n=this.byte(),a=yr[(n&240)>>4][n&15];if(e(this.curAddr)&&a!==null){var u=wr(n);if(u.cycles===3){this.disTriple(a,n,u);continue}else{this.disSingle(a,n,u);continue}}else this.disUnknown(n)}return this.flushBytes(),this.output},t}();var Y=function(){var t=function(r,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(i[a]=n[a])},t(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");t(r,e);function i(){this.constructor=r}r.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}(),I;(function(t){t[t.Program=0]="Program",t[t.Line=1]="Line",t[t.Label=2]="Label",t[t.LabelRef=3]="LabelRef",t[t.Instruction=4]="Instruction",t[t.Literal=5]="Literal",t[t.Register=6]="Register",t[t.SetPC=7]="SetPC",t[t.Expr=8]="Expr",t[t.Data=9]="Data"})(I||(I={}));var Oe;(function(t){t[t.Label=0]="Label"})(Oe||(Oe={}));function et(t,r){var e=null;return!t||r<t.offset||r>t.end?null:(t.accept(function(i){return i.offset===-1&&i.length===-1?!0:i.offset<=r&&i.end>=r?(e?i.length<=e.length&&(e=i):e=i,!0):!1}),e)}function kr(t,r){for(var e=et(t,r),i=[];e;)i.unshift(e),e=e.parent;return i}var K=function(){function t(r,e){var i,n;this.nodeType=e,this.parent=null,this.offset=(i=r?.loc.start.offset)!==null&&i!==void 0?i:0,this.length=((n=r?.loc.end.offset)!==null&&n!==void 0?n:0)-this.offset}return Object.defineProperty(t.prototype,"end",{get:function(){return this.offset+this.length},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"type",{get:function(){return this.nodeType},enumerable:!1,configurable:!0}),t.prototype.getTextProvider=function(){for(var r=this;r&&!r.textProvider;)r=r.parent;return r?r.textProvider:function(){return"unknown"}},t.prototype.getText=function(){return this.getTextProvider()(this.offset,this.length)},t.prototype.matches=function(r){return this.length===r.length&&this.getTextProvider()(this.offset,this.length)===r},t.prototype.accept=function(r){if(r(this)&&this.children)for(var e=0,i=this.children;e<i.length;e++){var n=i[e];n.accept(r)}},t.prototype.acceptVisitor=function(r){this.accept(r.visitNode.bind(r))},t.prototype.adoptChild=function(r){r.parent=this;var e=this.children;return e||(e=this.children=[]),e.push(r),r},t}();var Dr=function(t){Y(r,t);function r(e){var i=this,n;return i=t.call(this,e,I.Program)||this,(n=e?.lines)===null||n===void 0||n.forEach(function(a){return i.adoptChild(new ca(a))}),i}return r}(K);var ca=function(t){Y(r,t);function r(e){var i=t.call(this,e,I.Line)||this;if(e.label&&i.adoptChild(new we(e.label)),e.stmt)switch(e.stmt.type){case"insn":i.adoptChild(new Ft(e.stmt));break;case"setpc":i.adoptChild(new Ot(e.stmt));break;case"data":i.adoptChild(new Rt(e.stmt))}return i}return r}(K),we=function(t){Y(r,t);function r(e){var i=t.call(this,e,I.Label)||this;return i.length--,i}return r}(K);var Ot=function(t){Y(r,t);function r(e){var i=t.call(this,e,I.SetPC)||this;return i.pcExpr=i.adoptChild(new ua(e.pc)),i}return r}(K);var Rt=function(t){Y(r,t);function r(e){return t.call(this,e,I.Data)||this}return r}(K);var ua=function(t){Y(r,t);function r(e){return t.call(this,e,I.Expr)||this}return r}(K);var Ft=function(t){Y(r,t);function r(e){var i=t.call(this,e,I.Instruction)||this,n=function(a){switch(a.type){case"literal":return i.adoptChild(new jt(a));case"register":return i.adoptChild(new Tt(a));case"qualified-ident":return i.adoptChild(new Re(a));default:return}};return i.mnemonic=e.mnemonic.toLowerCase(),e.p1&&(i.p1=n(e.p1)),e.p2&&(i.p2=n(e.p2)),i}return r}(K);var Re=function(t){Y(r,t);function r(e){return t.call(this,e,I.LabelRef)||this}return r}(K);var jt=function(t){Y(r,t);function r(e){var i=t.call(this,e,I.Literal)||this;return i.value=e.lit,i}return r}(K);var Tt=function(t){Y(r,t);function r(e){var i=t.call(this,e,I.Register)||this;return i.value=e.value.toUpperCase(),i}return r}(K);var Ir=function(){function t(){}return t.prototype.parseProgram=function(r){var e=r.version,i=r.getText(),n=It(r.getText()),a=new Dr(n),u=function(p,m){if(r.version!==e)throw new Error("Underlying model has changed, AST is no longer valid");return i.substr(p,m)};return a.textProvider=u,a},t}();var Mr={version:1,mnemonics:[{name:"add",class:"ALU",summary:"Arithmetic Add",description:"Adds the contents of register B and C (B+C) placing the result in register A or D.",synopsis:"{0} = B + C",syntax:"[ a | d ]"},{name:"and",class:"ALU",summary:"Logic And",description:"Performs a bitwise AND operation on register B and C (B&C) placing the result in register A or D.",synopsis:"{0} = B & C",syntax:"[ a | d ]"},{name:"bcs",class:"GOTO",summary:"Branch if Carry Set",snippet:"bcs ${1:label}",description:"Jumps to the given address if the carry flag is set.",synopsis:"PC = {0} [if CY]",syntax:"<label>"},{name:"beq",class:"GOTO",summary:"Branch if Equal/Zero",snippet:"beq ${1:label}",description:"Jumps to the given address if the zero flag is set (equal).",synopsis:"PC = {0} [if Z]",syntax:"<label>"},{name:"ble",class:"GOTO",summary:"Branch if Less Than or Equal (Sign+Zero)",snippet:"ble ${1:label}",description:"Jumps to the given address if the sign or zero flag is set (less than or equal).",synopsis:"PC = {0} [if S or Z]",syntax:"<label>"},{name:"blt",class:"GOTO",summary:"Branch if Less Than (Sign)",snippet:"blt ${1:label}",description:"Jumps to the given address if the sign flag is set (less than).",synopsis:"PC = {0} [if S]",syntax:"<label>"},{name:"bmi",class:"GOTO",summary:"Branch if Minus/Sign",snippet:"bmi ${1:label}",description:"Jumps to the given address if the sign flag is set (negative).",synopsis:"PC = {0} [if S]",syntax:"<label>"},{name:"bne",class:"GOTO",summary:"Branch if Not Equal/Zero",snippet:"bne ${1:label}",description:"Jumps to the given address if the zero flag is not set (not equal).",synopsis:"PC = {0} [if not Z]",syntax:"<label>"},{name:"clr",class:"MOV8",summary:"Zero Value",description:"Clears the content (=0) of a given 8-bit register.",synopsis:"{0} = 0",syntax:"<target>{a,d|m1|m2|x|y}"},{name:"cmp",class:"ALU",summary:"Compare (Logic Xor)",description:"Compares the values in register B and C setting the zero flag if the same (affects register A or D) (equivalent to eor).",synopsis:"{0} = B != C",syntax:"[ a | d ]"},{name:"eor",class:"ALU",summary:"Logic Xor",description:"Performs a bitwise XOR operation on register B and C (B^C) placing the result in register A or D.",synopsis:"{0} = B ^ C",syntax:"[ a | d ]"},{name:"inc",class:"ALU",summary:"Increment",description:"Increments contents of register B placing the result in register A or D",synopsis:"{0} = B + 1",syntax:"[ a | d ]"},{name:"jmp",class:"GOTO",summary:"Jump to Label",snippet:"jmp ${1:label}",description:"Unconditionally jumps to the given address.",synopsis:"PC = {0}",syntax:"<label>"},{name:"jsr",class:"GOTO",summary:"Call Subroutine (Jump and Link)",snippet:"jsr ${1:label}",description:"Calls the subroutine at the given address.",synopsis:"XY = PC, PC = {0}",syntax:"<label>"},{name:"ldi",class:"SETAB",summary:"Load Immediate",snippet:"ldi ${1:a},${2:0}",description:"Loads an 8-bit value in to register A/B or a 16-bit value in to register M/J.",synopsis:"{0} = {1}",syntax:"[ <target>{a|b} , <value>{-16,15} ] | [ <target>{m|j} , [ <value>{0x0000,0xFFFF} | <label> ] ]"},{name:"mov",class:"MOV8",summary:"Copy Register to Register",snippet:"mov ${1:b},${2:a}",description:"Copies the content of one 8-bit register to another.",synopsis:"{0} = {1}",syntax:"<destination>{a,d|m1|m2|x|y} , <source>{a,d|m1|m2|x|y}"},{name:"not",class:"ALU",summary:"Logic Not",description:"Performs a bitwise NOT operation on register B (~B) placing the result in register A or D.",synopsis:"{0} = ~B",syntax:"[ a | d ]"},{name:"opc",class:"PSEUDO",summary:"Literal Opcode",snippet:"opc ${1:opcode}",description:"Performs the given machine opcode directly.",syntax:"[ <opcode>{0x00,0xFF} | <opcode>{0b00000000,0b11111111} ]"},{name:"orr",class:"ALU",summary:"Logic Or",description:"Performs a bitwise OR operation on register B and C (B|C) placing the result in register A or D.",synopsis:"{0} = B | C",syntax:"[ a | d ]"},{name:"rol",class:"ALU",summary:"Bitwise Circular Shift Left",description:"Performs a bitwise left rotation on register B (<<B) placing the result in register A or D.",synopsis:"{0} = <<B",syntax:"[ a | d ]"},{name:"org",class:"PSEUDO",summary:"Set Program Counter",description:"Sets the program counter to the given address such that the following instructions start from that location.",synopsis:"PC = {0}",syntax:"<value>{0x0000,0xFFFF}"},{name:"dfb",class:"PSEUDO",summary:"Define Byte Data",description:"Writes the given 8-bit values directly into the output starting from current location.",syntax:"<value>{0x00,0xFF} [ ,...n ]"},{name:"dfw",class:"PSEUDO",summary:"Define Word Data",description:"Writes the given 16-bit values directly into the output starting from current location.",syntax:"<value>{0x0000,0xFFFF} [ ,...n ]"}]};function Or(t){return Object.keys(t).map(function(r){return t[r]})}function be(t){return typeof t<"u"}var Rr=function(){function t(r){this.dataProviders=r,this._mnemonicSet={},this._mnemonics=[],this.collectData()}return t.prototype.collectData=function(){var r=this;this.dataProviders.forEach(function(e){e.provideMnemonics().forEach(function(i){r._mnemonicSet[i.name]||(r._mnemonicSet[i.name]=i)})}),this._mnemonics=Or(this._mnemonicSet)},t.prototype.getMnemonic=function(r){return this._mnemonicSet[r]},t.prototype.getMnemonics=function(){return this._mnemonics},t}();var Fr=function(){function t(r){this._mnemonics=[],this.addData(r)}return t.prototype.provideMnemonics=function(){return this._mnemonics},t.prototype.addData=function(r){r.mnemonics&&(this._mnemonics=this._mnemonics.concat(r.mnemonics))},t}();function rt(t,r){return r?{kind:"markdown",value:pa(t)}:{kind:"plaintext",value:da(t)}}function da(t){if(!t.description||t.description==="")return"";if(typeof t.description!="string")return t.description.value;var r="";return r+=t.description,"syntax"in t&&(r+=`

Syntax: `.concat(t.syntax)),r}function pa(t){if(!t.description||t.description==="")return"";var r="";return typeof t.description=="string"?r+=t.description:r=t.description.value,"syntax"in t&&(r+=`

Syntax: \``.concat(t.syntax,"`")),r}function Bt(t,r,e){return e?{kind:"markdown",value:jr(ga(t),r)}:{kind:"plaintext",value:jr(ha(t),r)}}function jr(t,r){if(!r||r.length===0)return t;for(var e=0;e<r.length;e++)t=t.replace("{".concat(e,"}"),r[e]);return t}function ha(t){if(!t.synopsis||t.synopsis==="")return"";var r="";return t.summary&&(t.class?r+="".concat(t.summary," [").concat(t.class,`]

`):r+="".concat(t.summary,`

`)),r+=t.synopsis,r}function ga(t){if(!t.synopsis||t.synopsis==="")return"";var r="";return t.summary&&(t.class?r+="".concat(t.summary," [").concat(t.class,`]

`):r+="".concat(t.summary,`

`)),r+="`"+t.synopsis+"`",r}var xe=new Rr([new Fr(Mr)]);var Br;(function(t){function r(e){return typeof e=="string"}t.is=r})(Br||(Br={}));var Ut;(function(t){function r(e){return typeof e=="string"}t.is=r})(Ut||(Ut={}));var Ur;(function(t){t.MIN_VALUE=-2147483648,t.MAX_VALUE=2147483647;function r(e){return typeof e=="number"&&t.MIN_VALUE<=e&&e<=t.MAX_VALUE}t.is=r})(Ur||(Ur={}));var it;(function(t){t.MIN_VALUE=0,t.MAX_VALUE=2147483647;function r(e){return typeof e=="number"&&t.MIN_VALUE<=e&&e<=t.MAX_VALUE}t.is=r})(it||(it={}));var j;(function(t){function r(i,n){return i===Number.MAX_VALUE&&(i=it.MAX_VALUE),n===Number.MAX_VALUE&&(n=it.MAX_VALUE),{line:i,character:n}}t.create=r;function e(i){var n=i;return d.objectLiteral(n)&&d.uinteger(n.line)&&d.uinteger(n.character)}t.is=e})(j||(j={}));var $;(function(t){function r(i,n,a,u){if(d.uinteger(i)&&d.uinteger(n)&&d.uinteger(a)&&d.uinteger(u))return{start:j.create(i,n),end:j.create(a,u)};if(j.is(i)&&j.is(n))return{start:i,end:n};throw new Error("Range#create called with invalid arguments[".concat(i,", ").concat(n,", ").concat(a,", ").concat(u,"]"))}t.create=r;function e(i){var n=i;return d.objectLiteral(n)&&j.is(n.start)&&j.is(n.end)}t.is=e})($||($={}));var he;(function(t){function r(i,n){return{uri:i,range:n}}t.create=r;function e(i){var n=i;return d.objectLiteral(n)&&$.is(n.range)&&(d.string(n.uri)||d.undefined(n.uri))}t.is=e})(he||(he={}));var Wr;(function(t){function r(i,n,a,u){return{targetUri:i,targetRange:n,targetSelectionRange:a,originSelectionRange:u}}t.create=r;function e(i){var n=i;return d.objectLiteral(n)&&$.is(n.targetRange)&&d.string(n.targetUri)&&$.is(n.targetSelectionRange)&&($.is(n.originSelectionRange)||d.undefined(n.originSelectionRange))}t.is=e})(Wr||(Wr={}));var Wt;(function(t){function r(i,n,a,u){return{red:i,green:n,blue:a,alpha:u}}t.create=r;function e(i){var n=i;return d.objectLiteral(n)&&d.numberRange(n.red,0,1)&&d.numberRange(n.green,0,1)&&d.numberRange(n.blue,0,1)&&d.numberRange(n.alpha,0,1)}t.is=e})(Wt||(Wt={}));var Nr;(function(t){function r(i,n){return{range:i,color:n}}t.create=r;function e(i){var n=i;return d.objectLiteral(n)&&$.is(n.range)&&Wt.is(n.color)}t.is=e})(Nr||(Nr={}));var zr;(function(t){function r(i,n,a){return{label:i,textEdit:n,additionalTextEdits:a}}t.create=r;function e(i){var n=i;return d.objectLiteral(n)&&d.string(n.label)&&(d.undefined(n.textEdit)||X.is(n))&&(d.undefined(n.additionalTextEdits)||d.typedArray(n.additionalTextEdits,X.is))}t.is=e})(zr||(zr={}));var Vr;(function(t){t.Comment="comment",t.Imports="imports",t.Region="region"})(Vr||(Vr={}));var qr;(function(t){function r(i,n,a,u,p,m){var h={startLine:i,endLine:n};return d.defined(a)&&(h.startCharacter=a),d.defined(u)&&(h.endCharacter=u),d.defined(p)&&(h.kind=p),d.defined(m)&&(h.collapsedText=m),h}t.create=r;function e(i){var n=i;return d.objectLiteral(n)&&d.uinteger(n.startLine)&&d.uinteger(n.startLine)&&(d.undefined(n.startCharacter)||d.uinteger(n.startCharacter))&&(d.undefined(n.endCharacter)||d.uinteger(n.endCharacter))&&(d.undefined(n.kind)||d.string(n.kind))}t.is=e})(qr||(qr={}));var Nt;(function(t){function r(i,n){return{location:i,message:n}}t.create=r;function e(i){var n=i;return d.defined(n)&&he.is(n.location)&&d.string(n.message)}t.is=e})(Nt||(Nt={}));var Ce;(function(t){t.Error=1,t.Warning=2,t.Information=3,t.Hint=4})(Ce||(Ce={}));var Hr;(function(t){t.Unnecessary=1,t.Deprecated=2})(Hr||(Hr={}));var Gr;(function(t){function r(e){var i=e;return d.objectLiteral(i)&&d.string(i.href)}t.is=r})(Gr||(Gr={}));var Fe;(function(t){function r(i,n,a,u,p,m){var h={range:i,message:n};return d.defined(a)&&(h.severity=a),d.defined(u)&&(h.code=u),d.defined(p)&&(h.source=p),d.defined(m)&&(h.relatedInformation=m),h}t.create=r;function e(i){var n,a=i;return d.defined(a)&&$.is(a.range)&&d.string(a.message)&&(d.number(a.severity)||d.undefined(a.severity))&&(d.integer(a.code)||d.string(a.code)||d.undefined(a.code))&&(d.undefined(a.codeDescription)||d.string((n=a.codeDescription)===null||n===void 0?void 0:n.href))&&(d.string(a.source)||d.undefined(a.source))&&(d.undefined(a.relatedInformation)||d.typedArray(a.relatedInformation,Nt.is))}t.is=e})(Fe||(Fe={}));var Se;(function(t){function r(i,n){for(var a=[],u=2;u<arguments.length;u++)a[u-2]=arguments[u];var p={title:i,command:n};return d.defined(a)&&a.length>0&&(p.arguments=a),p}t.create=r;function e(i){var n=i;return d.defined(n)&&d.string(n.title)&&d.string(n.command)}t.is=e})(Se||(Se={}));var X;(function(t){function r(a,u){return{range:a,newText:u}}t.replace=r;function e(a,u){return{range:{start:a,end:a},newText:u}}t.insert=e;function i(a){return{range:a,newText:""}}t.del=i;function n(a){var u=a;return d.objectLiteral(u)&&d.string(u.newText)&&$.is(u.range)}t.is=n})(X||(X={}));var Ae;(function(t){function r(i,n,a){var u={label:i};return n!==void 0&&(u.needsConfirmation=n),a!==void 0&&(u.description=a),u}t.create=r;function e(i){var n=i;return d.objectLiteral(n)&&d.string(n.label)&&(d.boolean(n.needsConfirmation)||n.needsConfirmation===void 0)&&(d.string(n.description)||n.description===void 0)}t.is=e})(Ae||(Ae={}));var F;(function(t){function r(e){var i=e;return d.string(i)}t.is=r})(F||(F={}));var oe;(function(t){function r(a,u,p){return{range:a,newText:u,annotationId:p}}t.replace=r;function e(a,u,p){return{range:{start:a,end:a},newText:u,annotationId:p}}t.insert=e;function i(a,u){return{range:a,newText:"",annotationId:u}}t.del=i;function n(a){var u=a;return X.is(u)&&(Ae.is(u.annotationId)||F.is(u.annotationId))}t.is=n})(oe||(oe={}));var st;(function(t){function r(i,n){return{textDocument:i,edits:n}}t.create=r;function e(i){var n=i;return d.defined(n)&&at.is(n.textDocument)&&Array.isArray(n.edits)}t.is=e})(st||(st={}));var je;(function(t){function r(i,n,a){var u={kind:"create",uri:i};return n!==void 0&&(n.overwrite!==void 0||n.ignoreIfExists!==void 0)&&(u.options=n),a!==void 0&&(u.annotationId=a),u}t.create=r;function e(i){var n=i;return n&&n.kind==="create"&&d.string(n.uri)&&(n.options===void 0||(n.options.overwrite===void 0||d.boolean(n.options.overwrite))&&(n.options.ignoreIfExists===void 0||d.boolean(n.options.ignoreIfExists)))&&(n.annotationId===void 0||F.is(n.annotationId))}t.is=e})(je||(je={}));var Te;(function(t){function r(i,n,a,u){var p={kind:"rename",oldUri:i,newUri:n};return a!==void 0&&(a.overwrite!==void 0||a.ignoreIfExists!==void 0)&&(p.options=a),u!==void 0&&(p.annotationId=u),p}t.create=r;function e(i){var n=i;return n&&n.kind==="rename"&&d.string(n.oldUri)&&d.string(n.newUri)&&(n.options===void 0||(n.options.overwrite===void 0||d.boolean(n.options.overwrite))&&(n.options.ignoreIfExists===void 0||d.boolean(n.options.ignoreIfExists)))&&(n.annotationId===void 0||F.is(n.annotationId))}t.is=e})(Te||(Te={}));var Be;(function(t){function r(i,n,a){var u={kind:"delete",uri:i};return n!==void 0&&(n.recursive!==void 0||n.ignoreIfNotExists!==void 0)&&(u.options=n),a!==void 0&&(u.annotationId=a),u}t.create=r;function e(i){var n=i;return n&&n.kind==="delete"&&d.string(n.uri)&&(n.options===void 0||(n.options.recursive===void 0||d.boolean(n.options.recursive))&&(n.options.ignoreIfNotExists===void 0||d.boolean(n.options.ignoreIfNotExists)))&&(n.annotationId===void 0||F.is(n.annotationId))}t.is=e})(Be||(Be={}));var zt;(function(t){function r(e){var i=e;return i&&(i.changes!==void 0||i.documentChanges!==void 0)&&(i.documentChanges===void 0||i.documentChanges.every(function(n){return d.string(n.kind)?je.is(n)||Te.is(n)||Be.is(n):st.is(n)}))}t.is=r})(zt||(zt={}));var nt=function(){function t(r,e){this.edits=r,this.changeAnnotations=e}return t.prototype.insert=function(r,e,i){var n,a;if(i===void 0?n=X.insert(r,e):F.is(i)?(a=i,n=oe.insert(r,e,i)):(this.assertChangeAnnotations(this.changeAnnotations),a=this.changeAnnotations.manage(i),n=oe.insert(r,e,a)),this.edits.push(n),a!==void 0)return a},t.prototype.replace=function(r,e,i){var n,a;if(i===void 0?n=X.replace(r,e):F.is(i)?(a=i,n=oe.replace(r,e,i)):(this.assertChangeAnnotations(this.changeAnnotations),a=this.changeAnnotations.manage(i),n=oe.replace(r,e,a)),this.edits.push(n),a!==void 0)return a},t.prototype.delete=function(r,e){var i,n;if(e===void 0?i=X.del(r):F.is(e)?(n=e,i=oe.del(r,e)):(this.assertChangeAnnotations(this.changeAnnotations),n=this.changeAnnotations.manage(e),i=oe.del(r,n)),this.edits.push(i),n!==void 0)return n},t.prototype.add=function(r){this.edits.push(r)},t.prototype.all=function(){return this.edits},t.prototype.clear=function(){this.edits.splice(0,this.edits.length)},t.prototype.assertChangeAnnotations=function(r){if(r===void 0)throw new Error("Text edit change is not configured to manage change annotations.")},t}(),Xr=function(){function t(r){this._annotations=r===void 0?Object.create(null):r,this._counter=0,this._size=0}return t.prototype.all=function(){return this._annotations},Object.defineProperty(t.prototype,"size",{get:function(){return this._size},enumerable:!1,configurable:!0}),t.prototype.manage=function(r,e){var i;if(F.is(r)?i=r:(i=this.nextId(),e=r),this._annotations[i]!==void 0)throw new Error("Id ".concat(i," is already in use."));if(e===void 0)throw new Error("No annotation provided for id ".concat(i));return this._annotations[i]=e,this._size++,i},t.prototype.nextId=function(){return this._counter++,this._counter.toString()},t}(),eo=function(){function t(r){var e=this;this._textEditChanges=Object.create(null),r!==void 0?(this._workspaceEdit=r,r.documentChanges?(this._changeAnnotations=new Xr(r.changeAnnotations),r.changeAnnotations=this._changeAnnotations.all(),r.documentChanges.forEach(function(i){if(st.is(i)){var n=new nt(i.edits,e._changeAnnotations);e._textEditChanges[i.textDocument.uri]=n}})):r.changes&&Object.keys(r.changes).forEach(function(i){var n=new nt(r.changes[i]);e._textEditChanges[i]=n})):this._workspaceEdit={}}return Object.defineProperty(t.prototype,"edit",{get:function(){return this.initDocumentChanges(),this._changeAnnotations!==void 0&&(this._changeAnnotations.size===0?this._workspaceEdit.changeAnnotations=void 0:this._workspaceEdit.changeAnnotations=this._changeAnnotations.all()),this._workspaceEdit},enumerable:!1,configurable:!0}),t.prototype.getTextEditChange=function(r){if(at.is(r)){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var e={uri:r.uri,version:r.version},i=this._textEditChanges[e.uri];if(!i){var n=[],a={textDocument:e,edits:n};this._workspaceEdit.documentChanges.push(a),i=new nt(n,this._changeAnnotations),this._textEditChanges[e.uri]=i}return i}else{if(this.initChanges(),this._workspaceEdit.changes===void 0)throw new Error("Workspace edit is not configured for normal text edit changes.");var i=this._textEditChanges[r];if(!i){var n=[];this._workspaceEdit.changes[r]=n,i=new nt(n),this._textEditChanges[r]=i}return i}},t.prototype.initDocumentChanges=function(){this._workspaceEdit.documentChanges===void 0&&this._workspaceEdit.changes===void 0&&(this._changeAnnotations=new Xr,this._workspaceEdit.documentChanges=[],this._workspaceEdit.changeAnnotations=this._changeAnnotations.all())},t.prototype.initChanges=function(){this._workspaceEdit.documentChanges===void 0&&this._workspaceEdit.changes===void 0&&(this._workspaceEdit.changes=Object.create(null))},t.prototype.createFile=function(r,e,i){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var n;Ae.is(e)||F.is(e)?n=e:i=e;var a,u;if(n===void 0?a=je.create(r,i):(u=F.is(n)?n:this._changeAnnotations.manage(n),a=je.create(r,i,u)),this._workspaceEdit.documentChanges.push(a),u!==void 0)return u},t.prototype.renameFile=function(r,e,i,n){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var a;Ae.is(i)||F.is(i)?a=i:n=i;var u,p;if(a===void 0?u=Te.create(r,e,n):(p=F.is(a)?a:this._changeAnnotations.manage(a),u=Te.create(r,e,n,p)),this._workspaceEdit.documentChanges.push(u),p!==void 0)return p},t.prototype.deleteFile=function(r,e,i){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var n;Ae.is(e)||F.is(e)?n=e:i=e;var a,u;if(n===void 0?a=Be.create(r,i):(u=F.is(n)?n:this._changeAnnotations.manage(n),a=Be.create(r,i,u)),this._workspaceEdit.documentChanges.push(a),u!==void 0)return u},t}();var Jr;(function(t){function r(i){return{uri:i}}t.create=r;function e(i){var n=i;return d.defined(n)&&d.string(n.uri)}t.is=e})(Jr||(Jr={}));var Zr;(function(t){function r(i,n){return{uri:i,version:n}}t.create=r;function e(i){var n=i;return d.defined(n)&&d.string(n.uri)&&d.integer(n.version)}t.is=e})(Zr||(Zr={}));var at;(function(t){function r(i,n){return{uri:i,version:n}}t.create=r;function e(i){var n=i;return d.defined(n)&&d.string(n.uri)&&(n.version===null||d.integer(n.version))}t.is=e})(at||(at={}));var Qr;(function(t){function r(i,n,a,u){return{uri:i,languageId:n,version:a,text:u}}t.create=r;function e(i){var n=i;return d.defined(n)&&d.string(n.uri)&&d.string(n.languageId)&&d.integer(n.version)&&d.string(n.text)}t.is=e})(Qr||(Qr={}));var z;(function(t){t.PlainText="plaintext",t.Markdown="markdown";function r(e){var i=e;return i===t.PlainText||i===t.Markdown}t.is=r})(z||(z={}));var Le;(function(t){function r(e){var i=e;return d.objectLiteral(e)&&z.is(i.kind)&&d.string(i.value)}t.is=r})(Le||(Le={}));var ot;(function(t){t.Text=1,t.Method=2,t.Function=3,t.Constructor=4,t.Field=5,t.Variable=6,t.Class=7,t.Interface=8,t.Module=9,t.Property=10,t.Unit=11,t.Value=12,t.Enum=13,t.Keyword=14,t.Snippet=15,t.Color=16,t.File=17,t.Reference=18,t.Folder=19,t.EnumMember=20,t.Constant=21,t.Struct=22,t.Event=23,t.Operator=24,t.TypeParameter=25})(ot||(ot={}));var Ue;(function(t){t.PlainText=1,t.Snippet=2})(Ue||(Ue={}));var Yr;(function(t){t.Deprecated=1})(Yr||(Yr={}));var Kr;(function(t){function r(i,n,a){return{newText:i,insert:n,replace:a}}t.create=r;function e(i){var n=i;return n&&d.string(n.newText)&&$.is(n.insert)&&$.is(n.replace)}t.is=e})(Kr||(Kr={}));var en;(function(t){t.asIs=1,t.adjustIndentation=2})(en||(en={}));var tn;(function(t){function r(e){var i=e;return i&&(d.string(i.detail)||i.detail===void 0)&&(d.string(i.description)||i.description===void 0)}t.is=r})(tn||(tn={}));var rn;(function(t){function r(e){return{label:e}}t.create=r})(rn||(rn={}));var Vt;(function(t){function r(e,i){return{items:e||[],isIncomplete:!!i}}t.create=r})(Vt||(Vt={}));var We;(function(t){function r(i){return i.replace(/[\\`*_{}[\]()#+\-.!]/g,"\\$&")}t.fromPlainText=r;function e(i){var n=i;return d.string(n)||d.objectLiteral(n)&&d.string(n.language)&&d.string(n.value)}t.is=e})(We||(We={}));var qt;(function(t){function r(e){var i=e;return!!i&&d.objectLiteral(i)&&(Le.is(i.contents)||We.is(i.contents)||d.typedArray(i.contents,We.is))&&(e.range===void 0||$.is(e.range))}t.is=r})(qt||(qt={}));var nn;(function(t){function r(e,i){return i?{label:e,documentation:i}:{label:e}}t.create=r})(nn||(nn={}));var sn;(function(t){function r(e,i){for(var n=[],a=2;a<arguments.length;a++)n[a-2]=arguments[a];var u={label:e};return d.defined(i)&&(u.documentation=i),d.defined(n)?u.parameters=n:u.parameters=[],u}t.create=r})(sn||(sn={}));var $e;(function(t){t.Text=1,t.Read=2,t.Write=3})($e||($e={}));var Ht;(function(t){function r(e,i){var n={range:e};return d.number(i)&&(n.kind=i),n}t.create=r})(Ht||(Ht={}));var Ee;(function(t){t.File=1,t.Module=2,t.Namespace=3,t.Package=4,t.Class=5,t.Method=6,t.Property=7,t.Field=8,t.Constructor=9,t.Enum=10,t.Interface=11,t.Function=12,t.Variable=13,t.Constant=14,t.String=15,t.Number=16,t.Boolean=17,t.Array=18,t.Object=19,t.Key=20,t.Null=21,t.EnumMember=22,t.Struct=23,t.Event=24,t.Operator=25,t.TypeParameter=26})(Ee||(Ee={}));var an;(function(t){t.Deprecated=1})(an||(an={}));var Gt;(function(t){function r(e,i,n,a,u){var p={name:e,kind:i,location:{uri:a,range:n}};return u&&(p.containerName=u),p}t.create=r})(Gt||(Gt={}));var on;(function(t){function r(e,i,n,a){return a!==void 0?{name:e,kind:i,location:{uri:n,range:a}}:{name:e,kind:i,location:{uri:n}}}t.create=r})(on||(on={}));var cn;(function(t){function r(i,n,a,u,p,m){var h={name:i,detail:n,kind:a,range:u,selectionRange:p};return m!==void 0&&(h.children=m),h}t.create=r;function e(i){var n=i;return n&&d.string(n.name)&&d.number(n.kind)&&$.is(n.range)&&$.is(n.selectionRange)&&(n.detail===void 0||d.string(n.detail))&&(n.deprecated===void 0||d.boolean(n.deprecated))&&(n.children===void 0||Array.isArray(n.children))&&(n.tags===void 0||Array.isArray(n.tags))}t.is=e})(cn||(cn={}));var un;(function(t){t.Empty="",t.QuickFix="quickfix",t.Refactor="refactor",t.RefactorExtract="refactor.extract",t.RefactorInline="refactor.inline",t.RefactorRewrite="refactor.rewrite",t.Source="source",t.SourceOrganizeImports="source.organizeImports",t.SourceFixAll="source.fixAll"})(un||(un={}));var ct;(function(t){t.Invoked=1,t.Automatic=2})(ct||(ct={}));var ln;(function(t){function r(i,n,a){var u={diagnostics:i};return n!=null&&(u.only=n),a!=null&&(u.triggerKind=a),u}t.create=r;function e(i){var n=i;return d.defined(n)&&d.typedArray(n.diagnostics,Fe.is)&&(n.only===void 0||d.typedArray(n.only,d.string))&&(n.triggerKind===void 0||n.triggerKind===ct.Invoked||n.triggerKind===ct.Automatic)}t.is=e})(ln||(ln={}));var fn;(function(t){function r(i,n,a){var u={title:i},p=!0;return typeof n=="string"?(p=!1,u.kind=n):Se.is(n)?u.command=n:u.edit=n,p&&a!==void 0&&(u.kind=a),u}t.create=r;function e(i){var n=i;return n&&d.string(n.title)&&(n.diagnostics===void 0||d.typedArray(n.diagnostics,Fe.is))&&(n.kind===void 0||d.string(n.kind))&&(n.edit!==void 0||n.command!==void 0)&&(n.command===void 0||Se.is(n.command))&&(n.isPreferred===void 0||d.boolean(n.isPreferred))&&(n.edit===void 0||zt.is(n.edit))}t.is=e})(fn||(fn={}));var dn;(function(t){function r(i,n){var a={range:i};return d.defined(n)&&(a.data=n),a}t.create=r;function e(i){var n=i;return d.defined(n)&&$.is(n.range)&&(d.undefined(n.command)||Se.is(n.command))}t.is=e})(dn||(dn={}));var pn;(function(t){function r(i,n){return{tabSize:i,insertSpaces:n}}t.create=r;function e(i){var n=i;return d.defined(n)&&d.uinteger(n.tabSize)&&d.boolean(n.insertSpaces)}t.is=e})(pn||(pn={}));var hn;(function(t){function r(i,n,a){return{range:i,target:n,data:a}}t.create=r;function e(i){var n=i;return d.defined(n)&&$.is(n.range)&&(d.undefined(n.target)||d.string(n.target))}t.is=e})(hn||(hn={}));var gn;(function(t){function r(i,n){return{range:i,parent:n}}t.create=r;function e(i){var n=i;return d.objectLiteral(n)&&$.is(n.range)&&(n.parent===void 0||t.is(n.parent))}t.is=e})(gn||(gn={}));var vn;(function(t){t.namespace="namespace",t.type="type",t.class="class",t.enum="enum",t.interface="interface",t.struct="struct",t.typeParameter="typeParameter",t.parameter="parameter",t.variable="variable",t.property="property",t.enumMember="enumMember",t.event="event",t.function="function",t.method="method",t.macro="macro",t.keyword="keyword",t.modifier="modifier",t.comment="comment",t.string="string",t.number="number",t.regexp="regexp",t.operator="operator",t.decorator="decorator"})(vn||(vn={}));var mn;(function(t){t.declaration="declaration",t.definition="definition",t.readonly="readonly",t.static="static",t.deprecated="deprecated",t.abstract="abstract",t.async="async",t.modification="modification",t.documentation="documentation",t.defaultLibrary="defaultLibrary"})(mn||(mn={}));var yn;(function(t){function r(e){var i=e;return d.objectLiteral(i)&&(i.resultId===void 0||typeof i.resultId=="string")&&Array.isArray(i.data)&&(i.data.length===0||typeof i.data[0]=="number")}t.is=r})(yn||(yn={}));var wn;(function(t){function r(i,n){return{range:i,text:n}}t.create=r;function e(i){var n=i;return n!=null&&$.is(n.range)&&d.string(n.text)}t.is=e})(wn||(wn={}));var bn;(function(t){function r(i,n,a){return{range:i,variableName:n,caseSensitiveLookup:a}}t.create=r;function e(i){var n=i;return n!=null&&$.is(n.range)&&d.boolean(n.caseSensitiveLookup)&&(d.string(n.variableName)||n.variableName===void 0)}t.is=e})(bn||(bn={}));var xn;(function(t){function r(i,n){return{range:i,expression:n}}t.create=r;function e(i){var n=i;return n!=null&&$.is(n.range)&&(d.string(n.expression)||n.expression===void 0)}t.is=e})(xn||(xn={}));var An;(function(t){function r(i,n){return{frameId:i,stoppedLocation:n}}t.create=r;function e(i){var n=i;return d.defined(n)&&$.is(i.stoppedLocation)}t.is=e})(An||(An={}));var Xt;(function(t){t.Type=1,t.Parameter=2;function r(e){return e===1||e===2}t.is=r})(Xt||(Xt={}));var Jt;(function(t){function r(i){return{value:i}}t.create=r;function e(i){var n=i;return d.objectLiteral(n)&&(n.tooltip===void 0||d.string(n.tooltip)||Le.is(n.tooltip))&&(n.location===void 0||he.is(n.location))&&(n.command===void 0||Se.is(n.command))}t.is=e})(Jt||(Jt={}));var Cn;(function(t){function r(i,n,a){var u={position:i,label:n};return a!==void 0&&(u.kind=a),u}t.create=r;function e(i){var n=i;return d.objectLiteral(n)&&j.is(n.position)&&(d.string(n.label)||d.typedArray(n.label,Jt.is))&&(n.kind===void 0||Xt.is(n.kind))&&n.textEdits===void 0||d.typedArray(n.textEdits,X.is)&&(n.tooltip===void 0||d.string(n.tooltip)||Le.is(n.tooltip))&&(n.paddingLeft===void 0||d.boolean(n.paddingLeft))&&(n.paddingRight===void 0||d.boolean(n.paddingRight))}t.is=e})(Cn||(Cn={}));var Sn;(function(t){function r(e){var i=e;return d.objectLiteral(i)&&Ut.is(i.uri)&&d.string(i.name)}t.is=r})(Sn||(Sn={}));var Ln;(function(t){function r(a,u,p,m){return new va(a,u,p,m)}t.create=r;function e(a){var u=a;return!!(d.defined(u)&&d.string(u.uri)&&(d.undefined(u.languageId)||d.string(u.languageId))&&d.uinteger(u.lineCount)&&d.func(u.getText)&&d.func(u.positionAt)&&d.func(u.offsetAt))}t.is=e;function i(a,u){for(var p=a.getText(),m=n(u,function(P,M){var ee=P.range.start.line-M.range.start.line;return ee===0?P.range.start.character-M.range.start.character:ee}),h=p.length,y=m.length-1;y>=0;y--){var w=m[y],C=a.offsetAt(w.range.start),x=a.offsetAt(w.range.end);if(x<=h)p=p.substring(0,C)+w.newText+p.substring(x,p.length);else throw new Error("Overlapping edit");h=C}return p}t.applyEdits=i;function n(a,u){if(a.length<=1)return a;var p=a.length/2|0,m=a.slice(0,p),h=a.slice(p);n(m,u),n(h,u);for(var y=0,w=0,C=0;y<m.length&&w<h.length;){var x=u(m[y],h[w]);x<=0?a[C++]=m[y++]:a[C++]=h[w++]}for(;y<m.length;)a[C++]=m[y++];for(;w<h.length;)a[C++]=h[w++];return a}})(Ln||(Ln={}));var va=function(){function t(r,e,i,n){this._uri=r,this._languageId=e,this._version=i,this._content=n,this._lineOffsets=void 0}return Object.defineProperty(t.prototype,"uri",{get:function(){return this._uri},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"languageId",{get:function(){return this._languageId},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"version",{get:function(){return this._version},enumerable:!1,configurable:!0}),t.prototype.getText=function(r){if(r){var e=this.offsetAt(r.start),i=this.offsetAt(r.end);return this._content.substring(e,i)}return this._content},t.prototype.update=function(r,e){this._content=r.text,this._version=e,this._lineOffsets=void 0},t.prototype.getLineOffsets=function(){if(this._lineOffsets===void 0){for(var r=[],e=this._content,i=!0,n=0;n<e.length;n++){i&&(r.push(n),i=!1);var a=e.charAt(n);i=a==="\r"||a===`
`,a==="\r"&&n+1<e.length&&e.charAt(n+1)===`
`&&n++}i&&e.length>0&&r.push(e.length),this._lineOffsets=r}return this._lineOffsets},t.prototype.positionAt=function(r){r=Math.max(Math.min(r,this._content.length),0);var e=this.getLineOffsets(),i=0,n=e.length;if(n===0)return j.create(0,r);for(;i<n;){var a=Math.floor((i+n)/2);e[a]>r?n=a:i=a+1}var u=i-1;return j.create(u,r-e[u])},t.prototype.offsetAt=function(r){var e=this.getLineOffsets();if(r.line>=e.length)return this._content.length;if(r.line<0)return 0;var i=e[r.line],n=r.line+1<e.length?e[r.line+1]:this._content.length;return Math.max(Math.min(i+r.character,n),i)},Object.defineProperty(t.prototype,"lineCount",{get:function(){return this.getLineOffsets().length},enumerable:!1,configurable:!0}),t}(),d;(function(t){var r=Object.prototype.toString;function e(x){return typeof x<"u"}t.defined=e;function i(x){return typeof x>"u"}t.undefined=i;function n(x){return x===!0||x===!1}t.boolean=n;function a(x){return r.call(x)==="[object String]"}t.string=a;function u(x){return r.call(x)==="[object Number]"}t.number=u;function p(x,P,M){return r.call(x)==="[object Number]"&&P<=x&&x<=M}t.numberRange=p;function m(x){return r.call(x)==="[object Number]"&&-2147483648<=x&&x<=2147483647}t.integer=m;function h(x){return r.call(x)==="[object Number]"&&0<=x&&x<=2147483647}t.uinteger=h;function y(x){return r.call(x)==="[object Function]"}t.func=y;function w(x){return x!==null&&typeof x=="object"}t.objectLiteral=w;function C(x,P){return Array.isArray(x)&&x.every(P)}t.typedArray=C})(d||(d={}));var ge=class{constructor(r,e,i,n){this._uri=r,this._languageId=e,this._version=i,this._content=n,this._lineOffsets=void 0}get uri(){return this._uri}get languageId(){return this._languageId}get version(){return this._version}getText(r){if(r){let e=this.offsetAt(r.start),i=this.offsetAt(r.end);return this._content.substring(e,i)}return this._content}update(r,e){for(let i of r)if(ge.isIncremental(i)){let n=En(i.range),a=this.offsetAt(n.start),u=this.offsetAt(n.end);this._content=this._content.substring(0,a)+i.text+this._content.substring(u,this._content.length);let p=Math.max(n.start.line,0),m=Math.max(n.end.line,0),h=this._lineOffsets,y=$n(i.text,!1,a);if(m-p===y.length)for(let C=0,x=y.length;C<x;C++)h[C+p+1]=y[C];else y.length<1e4?h.splice(p+1,m-p,...y):this._lineOffsets=h=h.slice(0,p+1).concat(y,h.slice(m+1));let w=i.text.length-(u-a);if(w!==0)for(let C=p+1+y.length,x=h.length;C<x;C++)h[C]=h[C]+w}else if(ge.isFull(i))this._content=i.text,this._lineOffsets=void 0;else throw new Error("Unknown change event received");this._version=e}getLineOffsets(){return this._lineOffsets===void 0&&(this._lineOffsets=$n(this._content,!0)),this._lineOffsets}positionAt(r){r=Math.max(Math.min(r,this._content.length),0);let e=this.getLineOffsets(),i=0,n=e.length;if(n===0)return{line:0,character:r};for(;i<n;){let u=Math.floor((i+n)/2);e[u]>r?n=u:i=u+1}let a=i-1;return{line:a,character:r-e[a]}}offsetAt(r){let e=this.getLineOffsets();if(r.line>=e.length)return this._content.length;if(r.line<0)return 0;let i=e[r.line],n=r.line+1<e.length?e[r.line+1]:this._content.length;return Math.max(Math.min(i+r.character,n),i)}get lineCount(){return this.getLineOffsets().length}static isIncremental(r){let e=r;return e!=null&&typeof e.text=="string"&&e.range!==void 0&&(e.rangeLength===void 0||typeof e.rangeLength=="number")}static isFull(r){let e=r;return e!=null&&typeof e.text=="string"&&e.range===void 0&&e.rangeLength===void 0}},Ne;(function(t){function r(n,a,u,p){return new ge(n,a,u,p)}t.create=r;function e(n,a,u){if(n instanceof ge)return n.update(a,u),n;throw new Error("TextDocument.update: document must be created by TextDocument.create")}t.update=e;function i(n,a){let u=n.getText(),p=Zt(a.map(ma),(y,w)=>{let C=y.range.start.line-w.range.start.line;return C===0?y.range.start.character-w.range.start.character:C}),m=0,h=[];for(let y of p){let w=n.offsetAt(y.range.start);if(w<m)throw new Error("Overlapping edit");w>m&&h.push(u.substring(m,w)),y.newText.length&&h.push(y.newText),m=n.offsetAt(y.range.end)}return h.push(u.substr(m)),h.join("")}t.applyEdits=i})(Ne||(Ne={}));function Zt(t,r){if(t.length<=1)return t;let e=t.length/2|0,i=t.slice(0,e),n=t.slice(e);Zt(i,r),Zt(n,r);let a=0,u=0,p=0;for(;a<i.length&&u<n.length;)r(i[a],n[u])<=0?t[p++]=i[a++]:t[p++]=n[u++];for(;a<i.length;)t[p++]=i[a++];for(;u<n.length;)t[p++]=n[u++];return t}function $n(t,r,e=0){let i=r?[e]:[];for(let n=0;n<t.length;n++){let a=t.charCodeAt(n);(a===13||a===10)&&(a===13&&n+1<t.length&&t.charCodeAt(n+1)===10&&n++,i.push(e+n+1))}return i}function En(t){let r=t.start,e=t.end;return r.line>e.line||r.line===e.line&&r.character>e.character?{start:e,end:r}:t}function ma(t){let r=En(t.range);return r!==t.range?{newText:t.newText,range:r}:t}var _n;(function(t){t.LATEST={textDocument:{completion:{completionItem:{documentationFormat:[z.Markdown,z.PlainText]}},hover:{contentFormat:[z.Markdown,z.PlainText]}}}})(_n||(_n={}));var Pn=function(){function t(r){this.clientCapabilities=r}return t.prototype.doComplete=function(r,e,i){this.offset=r.offsetAt(e),this.position=e,this.currentWord=ya(r,this.offset),this.defaultReplaceRange=$.create(j.create(this.position.line,this.position.character-this.currentWord.length),this.position),this.textDocument=r,this.program=i;try{var n={isIncomplete:!1,items:[]},a=r.getText($.create(j.create(this.position.line,0),this.position));return a.match(/^([a-z]+:)?([ \t]+)?([a-z]{0,3})$/i)&&this.getCompletionsForMnemonic(n),n}finally{this.position=null,this.currentWord=null,this.textDocument=null,this.program=null,this.defaultReplaceRange=null}},t.prototype.getCompletionsForMnemonic=function(r){var e=this,i=xe.getMnemonics();return i.forEach(function(n){var a,u,p;u=e.getCompletionRange(null),p=(a=n.snippet)!==null&&a!==void 0?a:n.name;var m={label:n.name,detail:n.class?"".concat(n.summary," [").concat(n.class,"]"):n.summary,documentation:rt(n,e.doesSupportMarkdown()),textEdit:X.replace(u,p),insertTextFormat:Ue.Snippet,kind:ot.Function};r.items.push(m)}),r},t.prototype.doesSupportMarkdown=function(){if(!be(this.supportsMarkdown)){if(!be(this.clientCapabilities))return this.supportsMarkdown=!0,this.supportsMarkdown;var r=this.clientCapabilities&&this.clientCapabilities.textDocument&&this.clientCapabilities.textDocument.hover;this.supportsMarkdown=r&&r.contentFormat&&Array.isArray(r.contentFormat)&&r.contentFormat.indexOf(z.Markdown)!==-1}return this.supportsMarkdown},t.prototype.getCompletionRange=function(r){if(r&&r.offset<=this.offset&&this.offset<=r.end){var e=r.end!==-1?this.textDocument.positionAt(r.end):this.position,i=this.textDocument.positionAt(r.offset);if(i.line===e.line)return $.create(i,e)}return this.defaultReplaceRange},t}();function ya(t,r){for(var e=r-1,i=t.getText();e>=0&&` 	
\r:,`.indexOf(i.charAt(e))===-1;)e--;return i.substring(e+1,r)}var kn=function(){function t(r){this.clientCapabilities=r}return t.prototype.doHover=function(r,e,i){function n(M){return $.create(r.positionAt(M.offset),r.positionAt(M.end))}for(var a=r.offsetAt(e),u=kr(i,a),p=null,m=0;m<u.length;m++){var h=u[m];if(h instanceof Ft){var y=h.mnemonic,w=xe.getMnemonic(y);if(w){var C=this.getParamNames(w,h),x=Bt(w,C,this.doesSupportMarkdown());p={contents:x,range:n(h)}}}if(h instanceof Ot){var w=xe.getMnemonic("org");if(w){var C=[h.pcExpr.getText()],x=Bt(w,C,this.doesSupportMarkdown());p={contents:x,range:n(h)}}}if(h instanceof Rt){var P=h.getText().slice(0,3).toLowerCase(),w=xe.getMnemonic(P);if(w){var x=rt(w,this.doesSupportMarkdown());p={contents:x,range:n(h)}}}}return p&&(p.contents=this.convertContents(p.contents)),p},t.prototype.getParamNames=function(r,e){var i=[];return e.p1?i.push(this.getParamName(e.p1,e.mnemonic)):r.class==="ALU"?i.push("A"):i.push("?"),e.p2?i.push(this.getParamName(e.p2,e.mnemonic)):i.push("?"),i},t.prototype.getParamName=function(r,e){return r instanceof Tt?r.value:r instanceof Re?"(".concat(r.getText(),")"):r instanceof jt?e.toLowerCase()==="ldi"&&r.value>15?"0x".concat(r.value.toString(16).toUpperCase()):r.value.toString():"?"},t.prototype.convertContents=function(r){return this.doesSupportMarkdown()||typeof r=="string"?r:"kind"in r?{kind:"plaintext",value:r.value}:Array.isArray(r)?r.map(function(e){return typeof e=="string"?e:e.value}):r.value},t.prototype.doesSupportMarkdown=function(){if(!be(this.supportsMarkdown)){if(!be(this.clientCapabilities))return this.supportsMarkdown=!0,this.supportsMarkdown;var r=this.clientCapabilities.textDocument&&this.clientCapabilities.textDocument.hover;this.supportsMarkdown=r&&r.contentFormat&&Array.isArray(r.contentFormat)&&r.contentFormat.indexOf(z.Markdown)!==-1}return this.supportsMarkdown},t}();var wa=function(){var t=function(r,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(i[a]=n[a])},t(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");t(r,e);function i(){this.constructor=r}r.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}(),ba=function(){function t(r,e){this.symbols=[]}return t.prototype.addSymbol=function(r){this.symbols.push(r)},t.prototype.getSymbol=function(r,e){for(var i=0;i<this.symbols.length;i++){var n=this.symbols[i];if(n.name===r&&n.type===e)return n}return null},t}();var xa=function(t){wa(r,t);function r(){return t.call(this,0,Number.MAX_VALUE)||this}return r}(ba);var Aa=function(){function t(r,e,i,n){this.name=r,this.value=e,this.node=i,this.type=n}return t}();var Ca=function(){function t(r){this.scope=r}return t.prototype.addSymbol=function(r,e,i,n){r.offset!==-1&&this.scope.addSymbol(new Aa(e,i,r,n))},t.prototype.visitNode=function(r){switch(r.type){case I.Label:return this.addSymbol(r,r.getText(),void 0,Oe.Label),!0}return!0},t}();var Qt=function(){function t(r){this.global=new xa,r.acceptVisitor(new Ca(this.global))}return t.prototype.internalFindSymbol=function(r,e){for(var i=r.getText(),n=this.global,a=0;a<e.length;a++){var u=e[a],p=n.getSymbol(i,u);if(p)return p}return null},t.prototype.evaluateReferenceTypes=function(r){return r instanceof Re||r instanceof we?[Oe.Label]:null},t.prototype.findSymbolFromNode=function(r){if(!r)return null;var e=this.evaluateReferenceTypes(r);return e?this.internalFindSymbol(r,e):null},t.prototype.matchesSymbol=function(r,e){if(!r||!r.matches(e.name))return!1;var i=this.evaluateReferenceTypes(r);if(!i||i.indexOf(e.type)===-1)return!1;var n=this.internalFindSymbol(r,i);return n===e},t}();var In=function(){function t(){}return t.prototype.findDefinition=function(r,e,i){var n=new Qt(i),a=r.offsetAt(e),u=et(i,a);if(!u)return null;var p=n.findSymbolFromNode(u);return p?{uri:r.uri,range:ut(p.node,r)}:null},t.prototype.findReferences=function(r,e,i){var n=this.findDocumentHighlights(r,e,i);return n.map(function(a){return{uri:r.uri,range:a.range}})},t.prototype.findDocumentHighlights=function(r,e,i){var n=[],a=r.offsetAt(e),u=et(i,a);if(!u||u.type!==I.Label&&u.type!==I.LabelRef)return n;var p=new Qt(i),m=p.findSymbolFromNode(u),h=u.getText();return i.accept(function(y){if(m){if(p.matchesSymbol(y,m))return n.push({kind:Dn(y),range:ut(y,r)}),!1}else u&&u.type===y.type&&y.matches(h)&&n.push({kind:Dn(y),range:ut(y,r)});return!0}),n},t.prototype.findDocumentSymbols=function(r,e){var i=[];return e.accept(function(n){var a={name:null,kind:Ee.Class,location:null},u=n;return n instanceof we&&(a.name=n.getText(),a.kind=Ee.Variable),a.name&&(a.location=he.create(r.uri,ut(u,r)),i.push(a)),!0}),i},t}();function Dn(t){return t instanceof we?$e.Write:$e.Read}function ut(t,r){return $.create(r.positionAt(t.offset),r.positionAt(t.end))}var Mn=function(){function t(){}return t.prototype.configure=function(r){this.settings=r},t.prototype.doValidation=function(r,e){if(e===void 0&&(e=this.settings),e&&e.validate===!1)return[];var i=Mt(r.getText()),n=i.errors,a=i.warnings,u=function(m,h){return{severity:h,range:{start:r.positionAt(m.loc.start.offset),end:r.positionAt(m.loc.end.offset)},message:m.msg,source:r.languageId}},p=[];return p.push.apply(p,n.map(function(m){return u(m,Ce.Error)})),p.push.apply(p,a.map(function(m){return u(m,Ce.Warning)})),p},t}();function On(t){var r=new Ir,e=new kn(t&&t.clientCapabilities),i=new Pn(t&&t.clientCapabilities),n=new In,a=new Mn;return{doValidation:a.doValidation.bind(a),parseProgram:r.parseProgram.bind(r),doComplete:i.doComplete.bind(i),doHover:e.doHover.bind(e),findDefinition:n.findDefinition.bind(n),findReferences:n.findReferences.bind(n),findDocumentHighlights:n.findDocumentHighlights.bind(n),findDocumentSymbols:n.findDocumentSymbols.bind(n)}}var lt=class{_ctx;_languageService;_languageId;constructor(r,e){this._ctx=r,this._languageId=e.languageId,this._languageService=On({})}async doValidation(r){let e=this._getTextDocument(r);if(e){let i=this._languageService.doValidation(e);return Promise.resolve(i)}return Promise.resolve([])}async doComplete(r,e){let i=this._getTextDocument(r);if(!i)return null;let n=this._languageService.parseProgram(i),a=this._languageService.doComplete(i,e,n);return Promise.resolve(a)}async doHover(r,e){let i=this._getTextDocument(r);if(!i)return null;let n=this._languageService.parseProgram(i),a=this._languageService.doHover(i,e,n);return Promise.resolve(a)}async findDefinition(r,e){let i=this._getTextDocument(r);if(!i)return null;let n=this._languageService.parseProgram(i),a=this._languageService.findDefinition(i,e,n);return Promise.resolve(a)}async findReferences(r,e){let i=this._getTextDocument(r);if(!i)return[];let n=this._languageService.parseProgram(i),a=this._languageService.findReferences(i,e,n);return Promise.resolve(a)}async findDocumentHighlights(r,e){let i=this._getTextDocument(r);if(!i)return[];let n=this._languageService.parseProgram(i),a=this._languageService.findDocumentHighlights(i,e,n);return Promise.resolve(a)}async findDocumentSymbols(r){let e=this._getTextDocument(r);if(!e)return[];let i=this._languageService.parseProgram(e),n=this._languageService.findDocumentSymbols(e,i);return Promise.resolve(n)}_getTextDocument(r){let e=this._ctx.getMirrorModels();for(let i of e)if(i.uri.toString()===r)return Ne.create(r,this._languageId,i.version,i.getValue());return null}};function La(t,r){return new lt(t,r)}return vr($a);})();
return moduleExports;
});
